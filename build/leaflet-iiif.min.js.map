{"version":3,"sources":["webpack://leaflet-iiif/webpack/universalModuleDefinition","webpack://leaflet-iiif/./src/assets/index.scss","webpack://leaflet-iiif/./node_modules/css-loader/dist/runtime/api.js","webpack://leaflet-iiif/./node_modules/css-loader/dist/runtime/cssWithMappingToString.js","webpack://leaflet-iiif/./node_modules/css-loader/dist/runtime/getUrl.js","webpack://leaflet-iiif/./src/assets/index.scss?ccbb","webpack://leaflet-iiif/./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js","webpack://leaflet-iiif/./src/assets/jpg.svg","webpack://leaflet-iiif/./src/assets/paint-board-and-brush.svg","webpack://leaflet-iiif/./src/assets/rotate-circular-arrow-around-a-rotated-square.svg","webpack://leaflet-iiif/./src/assets/symmetry.svg","webpack://leaflet-iiif/./src/event.ts","webpack://leaflet-iiif/./src/layer.ts","webpack://leaflet-iiif/./src/toolbar.ts","webpack://leaflet-iiif/./src/types.ts","webpack://leaflet-iiif/./src/utils/helper.ts","webpack://leaflet-iiif/./src/utils/projection.ts","webpack://leaflet-iiif/./src/utils/server-capabilities.ts","webpack://leaflet-iiif/external {\"amd\":\"leaflet\",\"root\":\"L\",\"commonjs\":\"leaflet\",\"commonjs2\":\"leaflet\"}","webpack://leaflet-iiif/webpack/bootstrap","webpack://leaflet-iiif/webpack/runtime/compat get default export","webpack://leaflet-iiif/webpack/runtime/define property getters","webpack://leaflet-iiif/webpack/runtime/hasOwnProperty shorthand","webpack://leaflet-iiif/webpack/runtime/make namespace object","webpack://leaflet-iiif/./src/index.ts"],"names":["root","factory","exports","module","require","define","amd","self","__WEBPACK_EXTERNAL_MODULE__389__","___CSS_LOADER_EXPORT___","___CSS_LOADER_URL_REPLACEMENT_0___","___CSS_LOADER_URL_REPLACEMENT_1___","___CSS_LOADER_URL_REPLACEMENT_2___","___CSS_LOADER_URL_REPLACEMENT_3___","push","id","cssWithMappingToString","list","toString","this","map","item","content","concat","join","i","modules","mediaQuery","dedupe","alreadyImportedModules","length","_i","_arrayLikeToArray","arr","len","arr2","Array","_item","isArray","_arrayWithHoles","Symbol","iterator","Object","_arr","_n","_d","_e","undefined","_s","next","done","value","err","_iterableToArrayLimit","o","minLen","n","prototype","call","slice","constructor","name","from","test","_unsupportedIterableToArray","TypeError","_nonIterableRest","cssMapping","btoa","base64","unescape","encodeURIComponent","JSON","stringify","data","sourceMapping","sourceURLs","sources","source","sourceRoot","url","options","__esModule","default","hash","needQuotes","replace","memo","getTarget","target","styleTarget","document","querySelector","window","HTMLIFrameElement","contentDocument","head","e","stylesInDom","getIndexByIdentifier","identifier","result","modulesToDom","idCountMap","identifiers","base","count","index","obj","css","media","sourceMap","references","updater","addStyle","insertStyleElement","style","createElement","attributes","nonce","keys","forEach","key","setAttribute","insert","Error","appendChild","textStore","replaceText","replacement","filter","Boolean","applyToSingletonTag","remove","styleSheet","cssText","cssNode","createTextNode","childNodes","removeChild","insertBefore","applyToTag","removeAttribute","firstChild","singleton","singletonCounter","update","styleIndex","bind","parentNode","removeStyleElement","newObj","all","atob","lastIdentifiers","newList","newLastIdentifiers","_index","splice","IIIF_EVENTS","CHANGE_FORMAT","CHANGE_QUALITY","CHANGE_ROTATION","CHANGE_MIRRORING","IIIFLayer","TileLayer","super","server","SERVER_CAPABILITIES_DEFAULT","height","width","zoomLayers","setUrl","templateUrl","initializePromise","Promise","resolve","reject","response","fetch","json","computeServerCapabilities","assign","DEFAULT_OPTIONS","tileSize","tileFormat","formats","quality","qualities","includes","minZoom","maxZoom","then","computeZoomLayers","onAdd","fitBounds","getBounds","setMaxBounds","registerEvents","onRemove","unRegisterEvents","coords","z","x","y","zoomLayer","find","layer","zoom","unprojectedSquare","projectSquare","rotation","bottomLeft","topRight","tileSizeX","scale","tileSizeY","minX","Math","min","minY","maxX","maxY","mirroring","diffX","params","format","region","abs","size","s","ceil","Util","template","_url","isValid","originalZoomLayer","tiles","latLngBounds","projectedSquare","sw","unproject","point","ne","pow","setMaxZoom","setMinZoom","on","onTileLoadStyle","changeFormat","changeQuality","changeRotation","changeMirroring","off","redraw","tile","naturalWidth","naturalHeight","top","right","left","bottom","CONTROL_NAME","IIIFControl","Control","DEFAULT_CONTROL_OPTIONS","_container","DomUtil","create","container","getContainer","enabled","values","createActions","title","html","className","innerHTML","fn","fire","rotations","Number","parseInt","createButton","actions","actionsWrapper","dataset","opened","actionsList","action","li","link","DomEvent","stopPropagation","version","zoomOffset","projectPoint","rotationInRadian","PI","round","cos","sin","square","p1","p2","max","computeServerCapabilitiesForV1","capabilities","match","profile","tile_width","tile_height","scale_factors","log2","uri","supports","scaleFactors","computeServerCapabilitiesForV2","extraFormats","ef","extraQualities","eq","extraFeatures","computeServerCapabilitiesForV3","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","__webpack_modules__","getter","d","a","definition","defineProperty","enumerable","get","prop","hasOwnProperty","r","toStringTag","L","Event","tileLayer","control"],"mappings":"CAAA,SAA2CA,EAAMC,GAC1B,iBAAZC,SAA0C,iBAAXC,OACxCA,OAAOD,QAAUD,EAAQG,QAAQ,YACR,mBAAXC,QAAyBA,OAAOC,IAC9CD,OAAO,CAAC,WAAYJ,GACM,iBAAZC,QACdA,QAAQ,gBAAkBD,EAAQG,QAAQ,YAE1CJ,EAAK,gBAAkBC,EAAQD,EAAQ,GARzC,CASGO,MAAM,SAASC,GAClB,M,0LCFIC,EAA0B,IAA4B,KACtDC,EAAqC,IAAgC,KACrEC,EAAqC,IAAgC,KACrEC,EAAqC,IAAgC,KACrEC,EAAqC,IAAgC,KAEzEJ,EAAwBK,KAAK,CAACX,EAAOY,GAAI,ySAA2SL,EAAqC,8EAAgFC,EAAqC,iFAAmFC,EAAqC,gFAAkFC,EAAqC,+pBAAgqB,GAAG,CAAC,QAAU,EAAE,QAAU,CAAC,qCAAqC,MAAQ,GAAG,SAAW,mXAAmX,eAAiB,CAAC,kiDAAgjD,WAAa,MAEr5G,W,qBCRAV,EAAOD,QAAU,SAAUc,GACzB,IAAIC,EAAO,GAuDX,OArDAA,EAAKC,SAAW,WACd,OAAOC,KAAKC,KAAI,SAAUC,GACxB,IAAIC,EAAUN,EAAuBK,GAErC,OAAIA,EAAK,GACA,UAAUE,OAAOF,EAAK,GAAI,MAAME,OAAOD,EAAS,KAGlDA,KACNE,KAAK,KAKVP,EAAKQ,EAAI,SAAUC,EAASC,EAAYC,GACf,iBAAZF,IAETA,EAAU,CAAC,CAAC,KAAMA,EAAS,MAG7B,IAAIG,EAAyB,GAE7B,GAAID,EACF,IAAK,IAAIH,EAAI,EAAGA,EAAIN,KAAKW,OAAQL,IAAK,CAEpC,IAAIV,EAAKI,KAAKM,GAAG,GAEP,MAANV,IACFc,EAAuBd,IAAM,GAKnC,IAAK,IAAIgB,EAAK,EAAGA,EAAKL,EAAQI,OAAQC,IAAM,CAC1C,IAAIV,EAAO,GAAGE,OAAOG,EAAQK,IAEzBH,GAAUC,EAAuBR,EAAK,MAKtCM,IACGN,EAAK,GAGRA,EAAK,GAAK,GAAGE,OAAOI,EAAY,SAASJ,OAAOF,EAAK,IAFrDA,EAAK,GAAKM,GAMdV,EAAKH,KAAKO,MAIPJ,I,oBCxDT,SAASe,EAAkBC,EAAKC,IAAkB,MAAPA,GAAeA,EAAMD,EAAIH,UAAQI,EAAMD,EAAIH,QAAQ,IAAK,IAAIL,EAAI,EAAGU,EAAO,IAAIC,MAAMF,GAAMT,EAAIS,EAAKT,IAAOU,EAAKV,GAAKQ,EAAIR,GAAM,OAAOU,EAMhLhC,EAAOD,QAAU,SAAgCmB,GAC/C,IAbsBY,EAAKR,EAavBY,GAbuBZ,EAaM,EAHnC,SAAyBQ,GAAO,GAAIG,MAAME,QAAQL,GAAM,OAAOA,EAVtBM,CAAjBN,EAaKZ,IAL7B,SAA+BY,EAAKR,GAAK,GAAsB,oBAAXe,QAA4BA,OAAOC,YAAYC,OAAOT,GAAjE,CAAgF,IAAIU,EAAO,GAAQC,GAAK,EAAUC,GAAK,EAAWC,OAAKC,EAAW,IAAM,IAAK,IAAiCC,EAA7BjB,EAAKE,EAAIO,OAAOC,cAAmBG,GAAMI,EAAKjB,EAAGkB,QAAQC,QAAoBP,EAAK7B,KAAKkC,EAAGG,QAAY1B,GAAKkB,EAAKb,SAAWL,GAA3DmB,GAAK,IAAoE,MAAOQ,GAAOP,GAAK,EAAMC,EAAKM,EAAO,QAAU,IAAWR,GAAsB,MAAhBb,EAAW,QAAWA,EAAW,SAAO,QAAU,GAAIc,EAAI,MAAMC,GAAQ,OAAOH,GARjaU,CAAsBpB,EAAKR,IAI5F,SAAqC6B,EAAGC,GAAU,GAAKD,EAAL,CAAgB,GAAiB,iBAANA,EAAgB,OAAOtB,EAAkBsB,EAAGC,GAAS,IAAIC,EAAId,OAAOe,UAAUvC,SAASwC,KAAKJ,GAAGK,MAAM,GAAI,GAAiE,MAAnD,WAANH,GAAkBF,EAAEM,cAAaJ,EAAIF,EAAEM,YAAYC,MAAgB,QAANL,GAAqB,QAANA,EAAoBpB,MAAM0B,KAAKR,GAAc,cAANE,GAAqB,2CAA2CO,KAAKP,GAAWxB,EAAkBsB,EAAGC,QAAzG,GAJ3MS,CAA4B/B,EAAKR,IAEnI,WAA8B,MAAM,IAAIwC,UAAU,6IAFuFC,IAcnI5C,EAAUe,EAAM,GAChB8B,EAAa9B,EAAM,GAEvB,GAAoB,mBAAT+B,KAAqB,CAE9B,IAAIC,EAASD,KAAKE,SAASC,mBAAmBC,KAAKC,UAAUN,MACzDO,EAAO,+DAA+DnD,OAAO8C,GAC7EM,EAAgB,OAAOpD,OAAOmD,EAAM,OACpCE,EAAaT,EAAWU,QAAQzD,KAAI,SAAU0D,GAChD,MAAO,iBAAiBvD,OAAO4C,EAAWY,YAAc,IAAIxD,OAAOuD,EAAQ,UAE7E,MAAO,CAACxD,GAASC,OAAOqD,GAAYrD,OAAO,CAACoD,IAAgBnD,KAAK,MAGnE,MAAO,CAACF,GAASE,KAAK,Q,qBC5BxBrB,EAAOD,QAAU,SAAU8E,EAAKC,GAS9B,OARKA,IAEHA,EAAU,IAMO,iBAFnBD,EAAMA,GAAOA,EAAIE,WAAaF,EAAIG,QAAUH,GAGnCA,GAIL,eAAejB,KAAKiB,KAEtBA,EAAMA,EAAIrB,MAAM,GAAI,IAGlBsB,EAAQG,OAEVJ,GAAOC,EAAQG,MAKb,cAAcrB,KAAKiB,IAAQC,EAAQI,WAC9B,IAAK9D,OAAOyD,EAAIM,QAAQ,KAAM,OAAOA,QAAQ,MAAO,OAAQ,KAG9DN,K,wFCxBI,IAAI,IALH,CAEd,OAAiB,OACjB,WAAoB,IAMpB,QAAe,YAAkB,I,2BCVjC,IACMO,EAeFC,EAAY,WACd,IAAID,EAAO,GACX,OAAO,SAAkBE,GACvB,QAA4B,IAAjBF,EAAKE,GAAyB,CACvC,IAAIC,EAAcC,SAASC,cAAcH,GAEzC,GAAII,OAAOC,mBAAqBJ,aAAuBG,OAAOC,kBAC5D,IAGEJ,EAAcA,EAAYK,gBAAgBC,KAC1C,MAAOC,GAEPP,EAAc,KAIlBH,EAAKE,GAAUC,EAGjB,OAAOH,EAAKE,IApBA,GAwBZS,EAAc,GAElB,SAASC,EAAqBC,GAG5B,IAFA,IAAIC,GAAU,EAEL5E,EAAI,EAAGA,EAAIyE,EAAYpE,OAAQL,IACtC,GAAIyE,EAAYzE,GAAG2E,aAAeA,EAAY,CAC5CC,EAAS5E,EACT,MAIJ,OAAO4E,EAGT,SAASC,EAAarF,EAAMgE,GAI1B,IAHA,IAAIsB,EAAa,GACbC,EAAc,GAET/E,EAAI,EAAGA,EAAIR,EAAKa,OAAQL,IAAK,CACpC,IAAIJ,EAAOJ,EAAKQ,GACZV,EAAKkE,EAAQwB,KAAOpF,EAAK,GAAK4D,EAAQwB,KAAOpF,EAAK,GAClDqF,EAAQH,EAAWxF,IAAO,EAC1BqF,EAAa,GAAG7E,OAAOR,EAAI,KAAKQ,OAAOmF,GAC3CH,EAAWxF,GAAM2F,EAAQ,EACzB,IAAIC,EAAQR,EAAqBC,GAC7BQ,EAAM,CACRC,IAAKxF,EAAK,GACVyF,MAAOzF,EAAK,GACZ0F,UAAW1F,EAAK,KAGH,IAAXsF,GACFT,EAAYS,GAAOK,aACnBd,EAAYS,GAAOM,QAAQL,IAE3BV,EAAYpF,KAAK,CACfsF,WAAYA,EACZa,QAASC,EAASN,EAAK3B,GACvB+B,WAAY,IAIhBR,EAAY1F,KAAKsF,GAGnB,OAAOI,EAGT,SAASW,EAAmBlC,GAC1B,IAAImC,EAAQzB,SAAS0B,cAAc,SAC/BC,EAAarC,EAAQqC,YAAc,GAEvC,QAAgC,IAArBA,EAAWC,MAAuB,CAC3C,IAAIA,EAAmD,KAEnDA,IACFD,EAAWC,MAAQA,GAQvB,GAJA7E,OAAO8E,KAAKF,GAAYG,SAAQ,SAAUC,GACxCN,EAAMO,aAAaD,EAAKJ,EAAWI,OAGP,mBAAnBzC,EAAQ2C,OACjB3C,EAAQ2C,OAAOR,OACV,CACL,IAAI3B,EAASD,EAAUP,EAAQ2C,QAAU,QAEzC,IAAKnC,EACH,MAAM,IAAIoC,MAAM,2GAGlBpC,EAAOqC,YAAYV,GAGrB,OAAOA,EAcT,IACMW,EADFC,GACED,EAAY,GACT,SAAiBpB,EAAOsB,GAE7B,OADAF,EAAUpB,GAASsB,EACZF,EAAUG,OAAOC,SAAS3G,KAAK,QAI1C,SAAS4G,EAAoBhB,EAAOT,EAAO0B,EAAQzB,GACjD,IAAIC,EAAMwB,EAAS,GAAKzB,EAAIE,MAAQ,UAAUvF,OAAOqF,EAAIE,MAAO,MAAMvF,OAAOqF,EAAIC,IAAK,KAAOD,EAAIC,IAIjG,GAAIO,EAAMkB,WACRlB,EAAMkB,WAAWC,QAAUP,EAAYrB,EAAOE,OACzC,CACL,IAAI2B,EAAU7C,SAAS8C,eAAe5B,GAClC6B,EAAatB,EAAMsB,WAEnBA,EAAW/B,IACbS,EAAMuB,YAAYD,EAAW/B,IAG3B+B,EAAW5G,OACbsF,EAAMwB,aAAaJ,EAASE,EAAW/B,IAEvCS,EAAMU,YAAYU,IAKxB,SAASK,EAAWzB,EAAOnC,EAAS2B,GAClC,IAAIC,EAAMD,EAAIC,IACVC,EAAQF,EAAIE,MACZC,EAAYH,EAAIG,UAepB,GAbID,EACFM,EAAMO,aAAa,QAASb,GAE5BM,EAAM0B,gBAAgB,SAGpB/B,GAA6B,oBAAT3C,OACtByC,GAAO,uDAAuDtF,OAAO6C,KAAKE,SAASC,mBAAmBC,KAAKC,UAAUsC,MAAe,QAMlIK,EAAMkB,WACRlB,EAAMkB,WAAWC,QAAU1B,MACtB,CACL,KAAOO,EAAM2B,YACX3B,EAAMuB,YAAYvB,EAAM2B,YAG1B3B,EAAMU,YAAYnC,SAAS8C,eAAe5B,KAI9C,IAAImC,EAAY,KACZC,EAAmB,EAEvB,SAAS/B,EAASN,EAAK3B,GACrB,IAAImC,EACA8B,EACAb,EAEJ,GAAIpD,EAAQ+D,UAAW,CACrB,IAAIG,EAAaF,IACjB7B,EAAQ4B,IAAcA,EAAY7B,EAAmBlC,IACrDiE,EAASd,EAAoBgB,KAAK,KAAMhC,EAAO+B,GAAY,GAC3Dd,EAASD,EAAoBgB,KAAK,KAAMhC,EAAO+B,GAAY,QAE3D/B,EAAQD,EAAmBlC,GAC3BiE,EAASL,EAAWO,KAAK,KAAMhC,EAAOnC,GAEtCoD,EAAS,YAxFb,SAA4BjB,GAE1B,GAAyB,OAArBA,EAAMiC,WACR,OAAO,EAGTjC,EAAMiC,WAAWV,YAAYvB,GAmFzBkC,CAAmBlC,IAKvB,OADA8B,EAAOtC,GACA,SAAqB2C,GAC1B,GAAIA,EAAQ,CACV,GAAIA,EAAO1C,MAAQD,EAAIC,KAAO0C,EAAOzC,QAAUF,EAAIE,OAASyC,EAAOxC,YAAcH,EAAIG,UACnF,OAGFmC,EAAOtC,EAAM2C,QAEblB,KAKNlI,EAAOD,QAAU,SAAUe,EAAMgE,IAC/BA,EAAUA,GAAW,IAGR+D,WAA0C,kBAAtB/D,EAAQ+D,YACvC/D,EAAQ+D,gBArOY,IAATzD,IAMTA,EAAO4C,QAAQtC,QAAUF,UAAYA,SAAS6D,MAAQ3D,OAAO4D,OAGxDlE,IAgOT,IAAImE,EAAkBpD,EADtBrF,EAAOA,GAAQ,GAC0BgE,GACzC,OAAO,SAAgB0E,GAGrB,GAFAA,EAAUA,GAAW,GAE2B,mBAA5CjH,OAAOe,UAAUvC,SAASwC,KAAKiG,GAAnC,CAIA,IAAK,IAAIlI,EAAI,EAAGA,EAAIiI,EAAgB5H,OAAQL,IAAK,CAC/C,IACIkF,EAAQR,EADKuD,EAAgBjI,IAEjCyE,EAAYS,GAAOK,aAKrB,IAFA,IAAI4C,EAAqBtD,EAAaqD,EAAS1E,GAEtClD,EAAK,EAAGA,EAAK2H,EAAgB5H,OAAQC,IAAM,CAClD,IAEI8H,EAAS1D,EAFKuD,EAAgB3H,IAIK,IAAnCmE,EAAY2D,GAAQ7C,aACtBd,EAAY2D,GAAQ5C,UAEpBf,EAAY4D,OAAOD,EAAQ,IAI/BH,EAAkBE,M,QC1QtBzJ,EAAOD,QAAU,khC,QCAjBC,EAAOD,QAAU,0vI,QCAjBC,EAAOD,QAAU,sgE,QCAjBC,EAAOD,QAAU,0rB,+FCAJ,EAAA6J,YAA2C,CACtDC,cAAe,cACfC,eAAgB,eAChBC,gBAAiB,gBACjBC,iBAAkB,mB,87BCJpB,kBACA,SAOA,SACA,SACA,QACA,SAEA,MAAaC,UAAkB,EAAAC,UAqC7B,YAAYrF,EAAaC,EAAqC,IAC5DqF,MAAMtF,EAAKC,GAjCb,KAAA7D,IAAkB,KAOlB,KAAAmJ,OAA6B,EAAAC,4BAG7B,KAAAC,OAAiB,EACjB,KAAAC,MAAgB,EAEhB,KAAAC,WAWK,GAUHxJ,KAAKyJ,OAAO,EAAAC,YAAY7F,IAO1B,WAAWA,EAAaC,GAkCtB,OAjCA9D,KAAK2J,kBAAoB,IAAIC,SAAQ,CAAOC,EAASC,IAAW,EAAD,gCAC7D,IAEE,MAAMC,QAAiBC,MAAMnG,GACvBN,QAAkBwG,EAASE,OAGjCjK,KAAKsJ,OAAS/F,EAAK+F,OACnBtJ,KAAKuJ,MAAQhG,EAAKgG,MAGlBvJ,KAAKoJ,OAAS,EAAAc,0BAA0B3G,GAGxCvD,KAAK8D,QAAUvC,OAAO4I,OACpBnK,KAAK8D,QACL,EAAAsG,gBAEA,CACEC,SAAUrK,KAAKoJ,OAAOiB,SACtBC,WAAYtK,KAAKoJ,OAAOmB,QAAQ,GAChCC,QAASxK,KAAKoJ,OAAOqB,UAAUC,SAAS,UAAY,SAAW,UAC/DC,QAAS3K,KAAKoJ,OAAOuB,QACrBC,QAAS5K,KAAKoJ,OAAOwB,SAGvB9G,GAEF+F,IACA,MAAO/E,GACPgF,EAAOhF,SAGJ9E,KAGT,MAAMC,GAyBJ,OAxBAD,KAAKC,IAAMA,EAGXD,KAAK2J,kBAAkBkB,MAAK,KAE1B7K,KAAK8K,oBAGL3B,MAAM4B,MAAM9K,GAGRD,KAAK8D,QAAQkH,WACfhL,KAAKC,IAAI+K,UAAUhL,KAAKiL,aAItBjL,KAAK8D,QAAQoH,cACflL,KAAKC,IAAIiL,aAAalL,KAAKiL,gBAK/BjL,KAAKmL,eAAelL,GAEbD,KAGT,SAASC,GAaP,OAXAkJ,MAAMiC,SAASnL,GAGXD,KAAK8D,QAAQoH,cAEfjL,EAAIiL,aAAc,MAIpBlL,KAAKqL,iBAAiBpL,GAEfD,KAMF,WAAWsL,GAChB,MAAMC,EAAID,EAAU,EACdE,EAAIF,EAAU,EACdG,EAAIH,EAAU,EACdI,EAAY1L,KAAKwJ,WAAWmC,MAAKC,GAASA,EAAMC,OAASN,IAC/D,IAAKG,EAAW,MAAM,IAAIhF,MAAM,8BAA8B6E,KAG9D,MAAMO,EAAoB,EAAAC,eAAe,EAAI/L,KAAK8D,QAAQkI,SAAU,CAClEC,WAAY,CAAET,IAAGC,KACjBS,SAAU,CAAEV,EAAGA,EAAI,EAAGC,EAAGA,EAAI,KAGzBU,EAAYnM,KAAK8D,QAAQuG,SAASmB,EAAIE,EAAUU,MAChDC,EAAYrM,KAAK8D,QAAQuG,SAASoB,EAAIC,EAAUU,MAGtD,IAAIE,EAAOC,KAAKC,IAAIV,EAAkBG,WAAWT,EAAIW,EAAWnM,KAAKuJ,OACjEkD,EAAOF,KAAKC,IAAIV,EAAkBG,WAAWR,EAAIY,EAAWrM,KAAKsJ,QACjEoD,EAAOH,KAAKC,IAAIF,EAAOH,EAAWnM,KAAKuJ,OACvCoD,EAAOJ,KAAKC,IAAIC,EAAOJ,EAAWrM,KAAKsJ,QAK3C,IAA+B,IAA3BtJ,KAAK8D,QAAQ8I,UAAoB,CACnC,MAAMC,EAAQH,EAAOJ,EACrBA,EAAOtM,KAAKuJ,MAAQ+C,EAAOO,EAC3BH,EAAO1M,KAAKuJ,MAAQmD,EAAOG,EAG7B,MAAMC,EAAS,CACbC,OAAQ/M,KAAK8D,QAAQwG,WACrBE,QAASxK,KAAK8D,QAAQ0G,QACtBoC,UAAW5M,KAAK8D,QAAQ8I,UACxBI,OAAQ,CAACV,EAAMG,EAAMF,KAAKU,IAAIP,EAAOJ,GAAOC,KAAKU,IAAIN,EAAOF,IAC5DT,UAAW,IAAMhM,KAAK8D,QAAQkI,UAAY,IAC1CkB,KAAM,CAACX,KAAKU,IAAIP,EAAOJ,GAAOC,KAAKU,IAAIN,EAAOF,IAAOxM,KAAIkN,GAAKZ,KAAKa,KAAKD,EAAIzB,EAAUU,UAGxF,OAAO,UAAEiB,KAAKC,SAAStN,KAAKuN,KAAM,CAChCR,OAAQD,EAAOC,OACfvC,QAASsC,EAAOtC,QAChBoC,UAAWE,EAAOF,UAAY,IAAM,GACpCI,OAAQF,EAAOE,OAAO3M,KAAK,KAC3B2L,SAAUc,EAAOd,SACjBkB,KAAMJ,EAAOI,KAAK7M,KAAK,OAIjB,aAAaiL,GACrB,IAAIkC,GAAU,EACd,MAAMhC,EAAIF,EAAU,EACdG,EAAIH,EAAU,EACdC,EAAID,EAAU,EAGdQ,EAAoB,EAAAC,eAAe,EAAI/L,KAAK8D,QAAQkI,SAAU,CAClEC,WAAY,CAAET,IAAGC,KACjBS,SAAU,CAAEV,EAAGA,EAAI,EAAGC,EAAGA,EAAI,KAG/B,GAAIzL,KAAK8D,QAAQ6G,SAAWY,GAAKA,GAAKvL,KAAK8D,QAAQ8G,QAAS,CAC1D,MAAM6C,EAAoBzN,KAAKwJ,WAAWmC,MAAKC,GAASA,EAAMC,OAASN,IAErE,GAAKO,EAAkBG,WAAWT,GAClCM,EAAkBG,WAAWT,EAAIiC,EAAkBC,MAAM,IACzD,GAAK5B,EAAkBG,WAAWR,GAClCK,EAAkBG,WAAWR,EAAIgC,EAAkBC,MAAM,KAEzDF,GAAU,GAEd,OAAOA,EAMD,YACN,IAAItI,EAAS,UAAEyI,aAAa,CAAC,EAAG,GAAI,CAAC,EAAG,IAExC,MAAMF,EAAoBzN,KAAKwJ,WAAWmC,MAAKC,GAAyB,IAAhBA,EAAMQ,QAC9D,GAAiB,OAAbpM,KAAKC,KAAgBwN,EAAmB,CAC1C,MAAMG,EAAkB,EAAA7B,cAAc/L,KAAK8D,QAAQkI,SAAU,CAC3DC,WAAY,CAAET,EAAG,EAAGC,EAAGgC,EAAkBnE,QACzC4C,SAAU,CAAEV,EAAGiC,EAAkBlE,MAAOkC,EAAG,KAGvCoC,EAAK7N,KAAKC,IAAI6N,UAAU,UAAEC,MAAMH,EAAgB3B,YAAa,GAC7D+B,EAAKhO,KAAKC,IAAI6N,UAAU,UAAEC,MAAMH,EAAgB1B,UAAW,GACjEhH,EAAS,UAAEyI,aAAaE,EAAIG,GAG9B,OAAO9I,EAMD,oBACNlF,KAAKwJ,WAAa,GAElB,IAAIqC,EAAO7L,KAAK8D,QAAQ6G,QACxB,KAAOkB,GAAQ7L,KAAK8D,QAAQ8G,SAAS,CACnC,MAAMwB,EAAQG,KAAK0B,IAAI,EAAGpC,GACpBvC,EAASiD,KAAKa,KAAKpN,KAAKsJ,OAAS8C,GACjC7C,EAAQgD,KAAKa,KAAKpN,KAAKuJ,MAAQ6C,GACrCpM,KAAKwJ,WAAW7J,KAAK,CACnBkM,OACAO,QACA9C,SACAC,QACAmE,MAAO,CAACnB,KAAKa,KAAK7D,EAAQvJ,KAAK8D,QAAQuG,SAASmB,GAAIe,KAAKa,KAAK9D,EAAStJ,KAAK8D,QAAQuG,SAASoB,MAE/FI,IAGF7L,KAAKC,IAAIiO,WAAWlO,KAAKwJ,WAAWxJ,KAAKwJ,WAAW7I,OAAS,GAAGkL,MAChE7L,KAAKC,IAAIkO,WAAWnO,KAAKwJ,WAAW,GAAGqC,MAGjC,eAAe5L,GACrBD,KAAKoO,GAAG,WAAYpO,KAAKqO,iBACzBpO,EAAImO,GAAG,EAAAxF,YAAYC,eAAgB/D,GAAW9E,KAAKsO,aAAaxJ,EAAE9C,SAClE/B,EAAImO,GAAG,EAAAxF,YAAYE,gBAAiBhE,GAAW9E,KAAKuO,cAAczJ,EAAE9C,SACpE/B,EAAImO,GAAG,EAAAxF,YAAYG,iBAAkBjE,GAAW9E,KAAKwO,eAAe1J,EAAE9C,SACtE/B,EAAImO,GAAG,EAAAxF,YAAYI,kBAAmBlE,GAAW9E,KAAKyO,gBAAgB3J,EAAE9C,SAGlE,iBAAiB/B,GACvBD,KAAK0O,IAAI,WAAY1O,KAAKqO,iBAC1BpO,EAAIyO,IAAI,EAAA9F,YAAYC,eAAgB/D,GAAW9E,KAAKsO,aAAaxJ,EAAE9C,SACnE/B,EAAIyO,IAAI,EAAA9F,YAAYE,gBAAiBhE,GAAW9E,KAAKuO,cAAczJ,EAAE9C,SACrE/B,EAAIyO,IAAI,EAAA9F,YAAYG,iBAAkBjE,GAAW9E,KAAKwO,eAAe1J,EAAE9C,SACvE/B,EAAIyO,IAAI,EAAA9F,YAAYI,kBAAmBlE,GAAW9E,KAAKyO,gBAAgB3J,EAAE9C,SAGnE,aAAaA,GACnBhC,KAAK8D,QAAQwG,WAAatI,EAC1BhC,KAAK2O,SAGC,cAAc3M,GACpBhC,KAAK8D,QAAQ0G,QAAUxI,EACvBhC,KAAK2O,SAGC,eAAe3M,GACrBhC,KAAK8D,QAAQkI,SAAWhK,EAEpBhC,KAAK8D,QAAQoH,cACflL,KAAKC,IAAIiL,aAAalL,KAAKiL,aAE7BjL,KAAK2O,SAGC,gBAAgB3M,GACtBhC,KAAK8D,QAAQ8I,UAAY5K,EACzBhC,KAAK2O,SAMC,gBAAgBC,GACtB,GAAIA,EAAKA,KAAKC,eAAiB7O,KAAK8D,QAAQuG,SAASmB,GAAKoD,EAAKA,KAAKE,gBAAkB9O,KAAK8D,QAAQuG,SAASoB,EAK1G,OAJAmD,EAAKA,KAAK3I,MAAMsD,MAAQ,GAAGqF,EAAKA,KAAKC,iBACrCD,EAAKA,KAAK3I,MAAMqD,OAAS,GAAGsF,EAAKA,KAAKE,kBAErB9O,KAAK8D,QAAQkI,SAAW,KAEvC,KAAK,GACH4C,EAAKA,KAAK3I,MAAM8I,IAAS/O,KAAK8D,QAAQuG,SAASmB,EAAIoD,EAAKA,KAAKE,cAAvC,KACtBF,EAAKA,KAAK3I,MAAM+I,MAAWhP,KAAK8D,QAAQuG,SAASoB,EAAImD,EAAKA,KAAKC,aAAvC,KACxB,MACF,KAAK,IACHD,EAAKA,KAAK3I,MAAM8I,IAAS/O,KAAK8D,QAAQuG,SAASmB,EAAIoD,EAAKA,KAAKE,cAAvC,KACtBF,EAAKA,KAAK3I,MAAMgJ,KAAUjP,KAAK8D,QAAQuG,SAASoB,EAAImD,EAAKA,KAAKC,aAAvC,KACvB,MACF,KAAK,IACHD,EAAKA,KAAK3I,MAAM8I,IAAM,IACtBH,EAAKA,KAAK3I,MAAMiJ,OAAYlP,KAAK8D,QAAQuG,SAASmB,EAAIoD,EAAKA,KAAKE,cAAvC,KACzBF,EAAKA,KAAK3I,MAAMgJ,KAAUjP,KAAK8D,QAAQuG,SAASoB,EAAImD,EAAKA,KAAKC,aAAvC,OAxTjC,e,ooBCbA,kBAEA,SACA,SAEMM,EAAe,uBAErB,MAAaC,UAAoB,EAAAC,QAY/B,YAAYzD,EAAkB9H,EAAuC,IACnEqF,MAAM5H,OAAO4I,OAAO,GAAI,EAAAmF,wBAAyBxL,IACjD9D,KAAK4L,MAAQA,EACb5L,KAAKuP,WAAa,UAAEC,QAAQC,OAAO,MAAO,GAAGN,iBAG/C,MAAMlP,GACJ,MAAMyP,EAAY1P,KAAK2P,eAiFvB,OA9EA3P,KAAK4L,MAAMjC,kBAAkBkB,MAAK,KAEhC,IAAqC,IAAjC7K,KAAK8D,QAAQ0G,QAAQoF,QAAkB,CACzC,MAAMnF,EAAYzK,KAAK8D,QAAQ0G,QAAQqF,OAAS7P,KAAK8D,QAAQ0G,QAAQqF,OAAS7P,KAAK4L,MAAMxC,OAAOqB,UAChGzK,KAAK8P,cACHJ,EACA1P,KAAK8D,QAAQ0G,QAAQuF,MACrB,GAAGZ,YACHnP,KAAK8D,QAAQ0G,QAAQwF,KACrBvF,EAAUxK,KAAKuK,IACN,CACLuF,MAAOvF,EACPyF,UAAW,GAAGd,aAAwB3E,IACtC0F,UAAW1F,EACX2F,GAAI,KACFlQ,EAAImQ,KAAK,EAAAxH,YAAYE,eAAgB,CAAE9G,MAAOwI,UAQxD,IAAoC,IAAhCxK,KAAK8D,QAAQiJ,OAAO6C,QAAkB,CACxC,MAAMrF,EAAUvK,KAAK8D,QAAQiJ,OAAO8C,OAAS7P,KAAK8D,QAAQiJ,OAAO8C,OAAS7P,KAAK4L,MAAMxC,OAAOmB,QAC5FvK,KAAK8P,cACHJ,EACA1P,KAAK8D,QAAQiJ,OAAOgD,MACpB,GAAGZ,WACHnP,KAAK8D,QAAQiJ,OAAOiD,KACpBzF,EAAQtK,KAAK8M,IACJ,CACLgD,MAAOhD,EACPkD,UAAW,GAAGd,YAAuBpC,IACrCmD,UAAWnD,EACXoD,GAAI,KACFlQ,EAAImQ,KAAK,EAAAxH,YAAYC,cAAe,CAAE7G,MAAO+K,UAQvD,IAAsC,IAAlC/M,KAAK8D,QAAQkI,SAAS4D,UAAmD,IAA/B5P,KAAK4L,MAAMxC,OAAO4C,SAAmB,CACjF,MAAMqE,EAAYrQ,KAAK8D,QAAQkI,SAAS6D,OAAS7P,KAAK8D,QAAQkI,SAAS6D,OAAS,CAAC,IAAK,KAAM,MAAO,OACnG7P,KAAK8P,cACHJ,EACA1P,KAAK8D,QAAQkI,SAAS+D,MACtB,GAAGZ,aACHnP,KAAK8D,QAAQkI,SAASgE,KACtBK,EAAUpQ,KAAK+L,IACN,CACL+D,MAAO/D,EACPiE,UAAW,GAAGd,cAAyBnD,IACvCkE,UAAWlE,EACXmE,GAAI,KACFlQ,EAAImQ,KAAK,EAAAxH,YAAYG,gBAAiB,CAAE/G,MAAOsO,OAAOC,SAASvE,YAQlC,IAAnChM,KAAK8D,QAAQ8I,UAAUgD,UAAoD,IAAhC5P,KAAK4L,MAAMxC,OAAOwD,WAC/D5M,KAAKwQ,aACHd,EACA1P,KAAK8D,QAAQ8I,UAAUmD,MACvB,GAAGZ,cACHnP,KAAK8D,QAAQ8I,UAAUoD,MACvB,KACE/P,EAAImQ,KAAK,EAAAxH,YAAYI,iBAAkB,CAAEhH,OAAQhC,KAAK4L,MAAM9H,QAAQ8I,kBAMrE8C,EAMD,cACNA,EACAK,EACAE,EACAC,EACAO,GAEA,MAAMC,EAAiB,UAAElB,QAAQC,OAAO,MAAOQ,GAC/CjQ,KAAKwQ,aAAaE,EAAgBX,EAAOE,EAAWC,GAAW,KACzDR,EAAUiB,QAAQC,SAAWX,EAAWP,EAAUiB,QAAQC,OAAS,GAClElB,EAAUiB,QAAQC,OAASX,KAGlC,MAAMY,EAAc,UAAErB,QAAQC,OAAO,KAAMQ,GAC3CQ,EAAQnK,SAAQwK,IACd,MAAMC,EAAK,UAAEvB,QAAQC,OAAO,KAAM,GAAIoB,GACtC7Q,KAAKwQ,aAAaO,EAAID,EAAOf,MAAOe,EAAOb,UAAWa,EAAOZ,WAAW,KACtEY,EAAOX,KACPT,EAAUiB,QAAQC,OAAS,MAE7BC,EAAYlK,YAAYoK,MAE1BL,EAAe/J,YAAYkK,GAE3BnB,EAAU/I,YAAY+J,GAMhB,aACNhB,EACAK,EACAE,EACAC,EACAC,GAEA,IAAIa,EAAoB,UAAExB,QAAQC,OAAO,IAAKQ,EAAWP,GAIzD,OAHAsB,EAAKjB,MAAQA,EACbiB,EAAKd,UAAYA,EACjB,UAAEe,SAAS7C,GAAG4C,EAAM,qBAAsB,UAAEC,SAASC,iBAAiB9C,GAAG4C,EAAM,QAASb,EAAInQ,MACrFgR,GAnJX,iB,uPCPA,kBAuBa,EAAA3H,4BAAkD,CAC7D8H,QAAS,MACT5G,QAAS,GACTE,UAAW,GACXuB,UAAU,EACVY,WAAW,EACXvC,SAAU,KACVM,QAAS,EACTC,QAAS,GA2BE,EAAAR,gBAAoC,CAC/CC,SAAU,UAAE0D,MAAM,IAAK,KACvBzD,WAAY,MACZE,QAAS,UACTwB,SAAU,EACVY,WAAW,EACX5B,WAAW,EACXE,cAAc,EACdP,QAAS,EACTC,QAAS,EACTwG,WAAY,GAkBD,EAAA9B,wBAA8C,CACzD9E,QAAS,CACPoF,SAAS,EACTG,MAAO,UACPC,KAAM,YAERjD,OAAQ,CACN6C,SAAS,EACTG,MAAO,SACPC,KAAM,YAERhE,SAAU,CACR4D,SAAS,EACTG,MAAO,WACPC,KAAM,YAERpD,UAAW,CACTgD,SAAS,EACTG,MAAO,YACPC,KAAM,c,8FCnGV,uBAA4BnM,GAC1B,OAAOA,EAAIM,QAAQ,aAAc,8D,yBCGnC,SAAgBkN,EAAarF,EAAkB+B,GAE7C,MAAMuD,GAAqB,EAAItF,EAAWO,KAAKgF,GAAM,IACrD,MAAO,CACL/F,EAAGe,KAAKiF,MAAMzD,EAAMvC,EAAIe,KAAKkF,IAAIH,GAAoBvD,EAAMtC,EAAIc,KAAKmF,IAAIJ,IACxE7F,EAAGc,KAAKiF,MAAMzD,EAAMtC,EAAIc,KAAKkF,IAAIH,GAAoBvD,EAAMvC,EAAIe,KAAKmF,IAAIJ,K,uFAL5E,iBAgBA,yBAA8BtF,EAAkB2F,GAC9C,MAAMC,EAAKP,EAAarF,EAAU2F,EAAO1F,YACnC4F,EAAKR,EAAarF,EAAU2F,EAAOzF,UACnCI,EAAOC,KAAKC,IAAIoF,EAAGpG,EAAGqG,EAAGrG,GACzBkB,EAAOH,KAAKuF,IAAIF,EAAGpG,EAAGqG,EAAGrG,GAG/B,MAAO,CACLS,WAAY,CAAET,EAAGc,EAAMb,EAHZc,KAAKC,IAAIoF,EAAGnG,EAAGoG,EAAGpG,IAI7BS,SAAU,CAAEV,EAAGkB,EAAMjB,EAHVc,KAAKuF,IAAIF,EAAGnG,EAAGoG,EAAGpG,O,0OChCjC,kBACA,SA+BA,SAAgBsG,EAA+BxO,GAC7C,MAAMyO,EAAezQ,OAAO4I,OAAO,GAAI,EAAAd,6BACvC2I,EAAab,QAAU,MAGvB,MAAMc,EAAQ,GAAG1O,EAAK2O,UAAUD,MAAM,+EAItC,OAHcA,GAA0B,IAAjBA,EAAMtR,OAAesR,EAAM,GAAK,UAIrD,IAAK,SACHD,EAAahG,UAAW,EACxBgG,EAAazH,QAAU,CAAC,MAAO,OAC/ByH,EAAavH,UAAY,CAAC,SAAU,QAAS,OAAQ,YACrD,MACF,IAAK,SACHuH,EAAahG,UAAW,EACxBgG,EAAazH,QAAU,CAAC,OACxByH,EAAavH,UAAY,CAAC,UAC1B,MAEF,QACEuH,EAAahG,UAAW,EACxBgG,EAAazH,QAAU,CAAC,OACxByH,EAAavH,UAAY,CAAC,UAqB9B,OAjBIlH,EAAKgH,UAASyH,EAAazH,QAAUhH,EAAKgH,SAG1ChH,EAAKkH,YAAWuH,EAAavH,UAAYlH,EAAKkH,WAG9ClH,EAAK4O,aACPH,EAAa3H,SAAW,UAAE0D,MAAMxK,EAAK4O,WAAY5O,EAAK6O,YAAc7O,EAAK6O,YAAc7O,EAAK4O,aAG1F5O,EAAK8O,eAAiB9O,EAAK8O,cAAc1R,QAAU,IACrDqR,EAAarH,QACX4B,KAAK+F,KAAK/O,EAAK8O,cAAc9O,EAAK8O,cAAc1R,OAAS,KACxD4C,EAAK8O,cAAc9O,EAAK8O,cAAc1R,OAAS,GAAK,GAAK,EAAI,GAChEqR,EAAapH,QAAU2B,KAAK+F,KAAK/O,EAAK8O,cAAc,KAAO9O,EAAK8O,cAAc,GAAK,GAAK,EAAI,IAGvFL,EAvET,qCAA0CzO,GACxC,IAAIgP,EAAM,GAAGhP,EAAK,cAOlB,OAJIA,EAAK,sBAAuBtC,QAC9BsR,EAAMhP,EAAK,YAAYA,EAAK,YAAY5C,OAAS,IAG3C4R,GACN,IAAK,8DACH,OAAOR,EAA+BxO,GAExC,IAAK,0CACH,OAiEN,SAAwCA,GACtC,MAAMyO,EAAezQ,OAAO4I,OAAO,GAAI,EAAAd,6BAKvC,OAJA2I,EAAab,QAAU,MACT5N,EAAK2O,QAAQ,IAIzB,IAAK,SACHF,EAAavH,UAAY,CAAC,UAAW,YACrCuH,EAAazH,QAAU,CAAC,MAAO,OAC/B,MACF,IAAK,SACHyH,EAAavH,UAAY,CAAC,WAC1BuH,EAAazH,QAAU,CAAC,MAAO,OAC/B,MAEF,QACEyH,EAAavH,UAAY,CAAC,WAC1BuH,EAAazH,QAAU,CAAC,OAuB5B,GAlBIhH,EAAK2O,QAAQ,IAAM3O,EAAK2O,QAAQ,GAAG3H,UAASyH,EAAazH,QAAUhH,EAAK2O,QAAQ,GAAG3H,SAGnFhH,EAAK2O,QAAQ,IAAM3O,EAAK2O,QAAQ,GAAGzH,YAAWuH,EAAavH,UAAYlH,EAAK2O,QAAQ,GAAGzH,WAIzFlH,EAAK2O,QAAQ,IACb3O,EAAK2O,QAAQ,GAAGM,WACfjP,EAAK2O,QAAQ,GAAGM,SAAS9H,SAAS,kBAAoBnH,EAAK2O,QAAQ,GAAGM,SAAS9H,SAAS,wBAEzFsH,EAAahG,UAAW,GAGtBzI,EAAK2O,QAAQ,IAAM3O,EAAK2O,QAAQ,GAAGM,UAAYjP,EAAK2O,QAAQ,GAAGM,SAAS9H,SAAS,eACnFsH,EAAapF,WAAY,GAGvBrJ,EAAKmK,OAASnK,EAAKmK,MAAM/M,QAAU,EAAG,CACxC,MAAMiO,EAAOrL,EAAKmK,MAAM,GACxBsE,EAAa3H,SAAW,UAAE0D,MAAMa,EAAKrF,MAAOqF,EAAKtF,OAASsF,EAAKtF,OAASsF,EAAKrF,OAC7EyI,EAAarH,QACX4B,KAAK+F,KAAK1D,EAAK6D,aAAa7D,EAAK6D,aAAa9R,OAAS,KACtDiO,EAAK6D,aAAa7D,EAAK6D,aAAa9R,OAAS,GAAK,GAAK,EAAI,GAC9DqR,EAAapH,QAAU2B,KAAK+F,KAAK1D,EAAK6D,aAAa,KAAO7D,EAAK6D,aAAa,GAAK,GAAK,EAAI,GAG5F,OAAOT,EAnHIU,CAA+BnP,GAExC,IAAK,0CACL,QACE,OAsHN,SAAwCA,GACtC,MAAMyO,EAAezQ,OAAO4I,OAAO,GAAI,EAAAd,6BAMvC,OALA2I,EAAab,QAAU,MAET5N,EAAK2O,SAIjB,IAAK,SACHF,EAAavH,UAAY,CAAC,WAC1BuH,EAAazH,QAAU,CAAC,MAAO,OAC/B,MACF,QACEyH,EAAavH,UAAY,CAAC,WAC1BuH,EAAazH,QAAU,CAAC,OA2B5B,GAtBIhH,EAAKoP,cAAgBpP,EAAKoP,wBAAwB1R,QACpD+Q,EAAazH,QAAUyH,EAAazH,QAAQnK,OAC1CmD,EAAKoP,aAAa5L,QAAO6L,IAAOZ,EAAazH,QAAQG,SAASkI,OAI9DrP,EAAKsP,gBAAkBtP,EAAKsP,0BAA0B5R,QACxD+Q,EAAavH,UAAYuH,EAAavH,UAAUrK,OAC9CmD,EAAKsP,eAAe9L,QAAO+L,IAAOd,EAAavH,UAAUC,SAASoI,OAKpEvP,EAAKwP,gBACJxP,EAAKwP,cAAcrI,SAAS,kBAAoBnH,EAAKwP,cAAcrI,SAAS,wBAE7EsH,EAAahG,UAAW,GAGtBzI,EAAKwP,eAAiBxP,EAAKwP,cAAcrI,SAAS,eAAcsH,EAAapF,WAAY,GAGzFrJ,EAAKmK,OAASnK,EAAKmK,MAAM/M,QAAU,EAAG,CACxC,MAAMiO,EAAOrL,EAAKmK,MAAM,GACxBsE,EAAa3H,SAAW,UAAE0D,MAAMa,EAAKrF,MAAOqF,EAAKtF,OAASsF,EAAKtF,OAASsF,EAAKrF,OAC7EyI,EAAarH,QACX4B,KAAK+F,KAAK1D,EAAK6D,aAAa7D,EAAK6D,aAAa9R,OAAS,KACtDiO,EAAK6D,aAAa7D,EAAK6D,aAAa9R,OAAS,GAAK,GAAK,EAAI,GAC9DqR,EAAapH,QAAU2B,KAAK+F,KAAK1D,EAAK6D,aAAa,KAAO7D,EAAK6D,aAAa,GAAK,GAAK,EAAI,GAG5F,OAAOT,EAxKIgB,CAA+BzP,KAS5C,oC,qBChCAvE,EAAOD,QAAUM,ICCb4T,EAA2B,GAG/B,SAASC,EAAoBC,GAE5B,IAAIC,EAAeH,EAAyBE,GAC5C,QAAqBvR,IAAjBwR,EACH,OAAOA,EAAarU,QAGrB,IAAIC,EAASiU,EAAyBE,GAAY,CACjDvT,GAAIuT,EAEJpU,QAAS,IAOV,OAHAsU,EAAoBF,GAAU5Q,KAAKvD,EAAOD,QAASC,EAAQA,EAAOD,QAASmU,GAGpElU,EAAOD,QCpBfmU,EAAoB7Q,EAAKrD,IACxB,IAAIsU,EAAStU,GAAUA,EAAO+E,WAC7B,IAAO/E,EAAiB,QACxB,IAAM,EAEP,OADAkU,EAAoBK,EAAED,EAAQ,CAAEE,EAAGF,IAC5BA,GCLRJ,EAAoBK,EAAI,CAACxU,EAAS0U,KACjC,IAAI,IAAIlN,KAAOkN,EACXP,EAAoB/Q,EAAEsR,EAAYlN,KAAS2M,EAAoB/Q,EAAEpD,EAASwH,IAC5EhF,OAAOmS,eAAe3U,EAASwH,EAAK,CAAEoN,YAAY,EAAMC,IAAKH,EAAWlN,MCJ3E2M,EAAoB/Q,EAAI,CAACsD,EAAKoO,IAAUtS,OAAOe,UAAUwR,eAAevR,KAAKkD,EAAKoO,GCClFX,EAAoBa,EAAKhV,IACH,oBAAXsC,QAA0BA,OAAO2S,aAC1CzS,OAAOmS,eAAe3U,EAASsC,OAAO2S,YAAa,CAAEhS,MAAO,WAE7DT,OAAOmS,eAAe3U,EAAS,aAAc,CAAEiD,OAAO,K,4HCHvD,eACA,SAIS,yEAJA,EAAAiH,aACT,eAGoB,2EAHX,EAAAmG,eACT,OAIA1K,OAAOuP,EAAQ,KAAI,CAAEC,MAAO,EAAAtL,aAC5BlE,OAAOuP,EAAEE,UAAgB,KAAI,SAAStQ,EAAaC,GACjD,OAAO,IAAI,EAAAmF,UAAUpF,EAAKC,IAE5BY,OAAOuP,EAAEG,QAAc,KAAI,SAASxI,EAAkB9H,GACpD,OAAO,IAAI,EAAAsL,YAAYxD,EAAO9H,K","file":"leaflet-iiif.min.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"leaflet\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"leaflet\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"leaflet-iiif\"] = factory(require(\"leaflet\"));\n\telse\n\t\troot[\"leaflet-iiif\"] = factory(root[\"L\"]);\n})(self, function(__WEBPACK_EXTERNAL_MODULE__389__) {\nreturn ","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/cssWithMappingToString.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/api.js\";\nimport ___CSS_LOADER_GET_URL_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/getUrl.js\";\nimport ___CSS_LOADER_URL_IMPORT_0___ from \"./paint-board-and-brush.svg?encoding=base64\";\nimport ___CSS_LOADER_URL_IMPORT_1___ from \"./jpg.svg?encoding=base64\";\nimport ___CSS_LOADER_URL_IMPORT_2___ from \"./symmetry.svg?encoding=base64\";\nimport ___CSS_LOADER_URL_IMPORT_3___ from \"./rotate-circular-arrow-around-a-rotated-square.svg?encoding=base64\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\nvar ___CSS_LOADER_URL_REPLACEMENT_0___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_0___);\nvar ___CSS_LOADER_URL_REPLACEMENT_1___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_1___);\nvar ___CSS_LOADER_URL_REPLACEMENT_2___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_2___);\nvar ___CSS_LOADER_URL_REPLACEMENT_3___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_3___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".leaflet-tile-container .leaflet-tile .leaflet-iiif-tile{height:100%;width:100%}.leaflet-tile-container .leaflet-tile .leaflet-iiif-tile img{flex-shrink:0}.leaflet-control-iiif a{cursor:pointer;background-size:15px 15px}.leaflet-control-iiif a.leaflet-control-iiif-quality{background-image:url(\" + ___CSS_LOADER_URL_REPLACEMENT_0___ + \")}.leaflet-control-iiif a.leaflet-control-iiif-format{background-image:url(\" + ___CSS_LOADER_URL_REPLACEMENT_1___ + \")}.leaflet-control-iiif a.leaflet-control-iiif-mirroring{background-image:url(\" + ___CSS_LOADER_URL_REPLACEMENT_2___ + \")}.leaflet-control-iiif a.leaflet-control-iiif-rotation{background-image:url(\" + ___CSS_LOADER_URL_REPLACEMENT_3___ + \")}.leaflet-control-iiif ul{display:none;list-style:none;margin:0;padding:0;position:relative;width:0;height:0;top:-30px;right:-1px;flex-flow:row-reverse}.leaflet-control-iiif ul li{display:inline-block}.leaflet-control-iiif ul li a{background-color:#919187;color:#fff;padding:0 5px;width:auto !important;border-right:1px solid #fff}div.leaflet-control-iiif[data-opened=leaflet-control-iiif-quality] ul.leaflet-control-iiif-quality{display:flex}div.leaflet-control-iiif[data-opened=leaflet-control-iiif-format] ul.leaflet-control-iiif-format{display:flex}div.leaflet-control-iiif[data-opened=leaflet-control-iiif-rotation] ul.leaflet-control-iiif-rotation{display:flex}\", \"\",{\"version\":3,\"sources\":[\"webpack://./src/assets/index.scss\"],\"names\":[],\"mappings\":\"AAEI,yDACE,WAAA,CACA,UAAA,CAEA,6DACE,aAAA,CAMN,wBACE,cAAA,CACA,yBAAA,CAGF,qDACE,wDAAA,CAEF,oDACE,wDAAA,CAEF,uDACE,wDAAA,CAEF,sDACE,wDAAA,CAGF,yBACE,YAAA,CACA,eAAA,CACA,QAAA,CACA,SAAA,CACA,iBAAA,CACA,OAAA,CACA,QAAA,CACA,SAAA,CACA,UAAA,CACA,qBAAA,CAEA,4BACE,oBAAA,CAEA,8BACE,wBAAA,CACA,UAAA,CACA,aAAA,CACA,qBAAA,CACA,2BAAA,CAOR,mGACE,YAAA,CAEF,iGACE,YAAA,CAEF,qGACE,YAAA\",\"sourcesContent\":[\".leaflet-tile-container {\\n  .leaflet-tile {\\n    .leaflet-iiif-tile {\\n      height: 100%;\\n      width: 100%;\\n\\n      img {\\n        flex-shrink: 0;\\n      }\\n    }\\n  }\\n}\\n.leaflet-control-iiif {\\n  a {\\n    cursor: pointer;\\n    background-size: 15px 15px;\\n  }\\n\\n  a.leaflet-control-iiif-quality {\\n    background-image: url(\\\"./paint-board-and-brush.svg?encoding=base64\\\");\\n  }\\n  a.leaflet-control-iiif-format {\\n    background-image: url(\\\"./jpg.svg?encoding=base64\\\");\\n  }\\n  a.leaflet-control-iiif-mirroring {\\n    background-image: url(\\\"./symmetry.svg?encoding=base64\\\");\\n  }\\n  a.leaflet-control-iiif-rotation {\\n    background-image: url(\\\"./rotate-circular-arrow-around-a-rotated-square.svg?encoding=base64\\\");\\n  }\\n\\n  ul {\\n    display: none;\\n    list-style: none;\\n    margin: 0;\\n    padding: 0;\\n    position: relative;\\n    width: 0;\\n    height: 0;\\n    top: -30px;\\n    right: -1px;\\n    flex-flow: row-reverse;\\n\\n    li {\\n      display: inline-block;\\n\\n      a {\\n        background-color: #919187;\\n        color: #fff;\\n        padding: 0 5px;\\n        width: auto !important;\\n        border-right: 1px solid #fff;\\n      }\\n    }\\n  }\\n}\\n\\n// Menu selection\\ndiv.leaflet-control-iiif[data-opened=\\\"leaflet-control-iiif-quality\\\"] ul.leaflet-control-iiif-quality {\\n  display: flex;\\n}\\ndiv.leaflet-control-iiif[data-opened=\\\"leaflet-control-iiif-format\\\"] ul.leaflet-control-iiif-format {\\n  display: flex;\\n}\\ndiv.leaflet-control-iiif[data-opened=\\\"leaflet-control-iiif-rotation\\\"] ul.leaflet-control-iiif-rotation {\\n  display: flex;\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","\"use strict\";\n\n/*\n  MIT License http://www.opensource.org/licenses/mit-license.php\n  Author Tobias Koppers @sokra\n*/\n// css base code, injected by the css-loader\n// eslint-disable-next-line func-names\nmodule.exports = function (cssWithMappingToString) {\n  var list = []; // return the list of modules as css string\n\n  list.toString = function toString() {\n    return this.map(function (item) {\n      var content = cssWithMappingToString(item);\n\n      if (item[2]) {\n        return \"@media \".concat(item[2], \" {\").concat(content, \"}\");\n      }\n\n      return content;\n    }).join(\"\");\n  }; // import a list of modules into the list\n  // eslint-disable-next-line func-names\n\n\n  list.i = function (modules, mediaQuery, dedupe) {\n    if (typeof modules === \"string\") {\n      // eslint-disable-next-line no-param-reassign\n      modules = [[null, modules, \"\"]];\n    }\n\n    var alreadyImportedModules = {};\n\n    if (dedupe) {\n      for (var i = 0; i < this.length; i++) {\n        // eslint-disable-next-line prefer-destructuring\n        var id = this[i][0];\n\n        if (id != null) {\n          alreadyImportedModules[id] = true;\n        }\n      }\n    }\n\n    for (var _i = 0; _i < modules.length; _i++) {\n      var item = [].concat(modules[_i]);\n\n      if (dedupe && alreadyImportedModules[item[0]]) {\n        // eslint-disable-next-line no-continue\n        continue;\n      }\n\n      if (mediaQuery) {\n        if (!item[2]) {\n          item[2] = mediaQuery;\n        } else {\n          item[2] = \"\".concat(mediaQuery, \" and \").concat(item[2]);\n        }\n      }\n\n      list.push(item);\n    }\n  };\n\n  return list;\n};","\"use strict\";\n\nfunction _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }\n\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction _iterableToArrayLimit(arr, i) { if (typeof Symbol === \"undefined\" || !(Symbol.iterator in Object(arr))) return; var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"] != null) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; }\n\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\nmodule.exports = function cssWithMappingToString(item) {\n  var _item = _slicedToArray(item, 4),\n      content = _item[1],\n      cssMapping = _item[3];\n\n  if (typeof btoa === \"function\") {\n    // eslint-disable-next-line no-undef\n    var base64 = btoa(unescape(encodeURIComponent(JSON.stringify(cssMapping))));\n    var data = \"sourceMappingURL=data:application/json;charset=utf-8;base64,\".concat(base64);\n    var sourceMapping = \"/*# \".concat(data, \" */\");\n    var sourceURLs = cssMapping.sources.map(function (source) {\n      return \"/*# sourceURL=\".concat(cssMapping.sourceRoot || \"\").concat(source, \" */\");\n    });\n    return [content].concat(sourceURLs).concat([sourceMapping]).join(\"\\n\");\n  }\n\n  return [content].join(\"\\n\");\n};","\"use strict\";\n\nmodule.exports = function (url, options) {\n  if (!options) {\n    // eslint-disable-next-line no-param-reassign\n    options = {};\n  } // eslint-disable-next-line no-underscore-dangle, no-param-reassign\n\n\n  url = url && url.__esModule ? url.default : url;\n\n  if (typeof url !== \"string\") {\n    return url;\n  } // If url is already wrapped in quotes, remove them\n\n\n  if (/^['\"].*['\"]$/.test(url)) {\n    // eslint-disable-next-line no-param-reassign\n    url = url.slice(1, -1);\n  }\n\n  if (options.hash) {\n    // eslint-disable-next-line no-param-reassign\n    url += options.hash;\n  } // Should url be wrapped?\n  // See https://drafts.csswg.org/css-values-3/#urls\n\n\n  if (/[\"'() \\t\\n]/.test(url) || options.needQuotes) {\n    return \"\\\"\".concat(url.replace(/\"/g, '\\\\\"').replace(/\\n/g, \"\\\\n\"), \"\\\"\");\n  }\n\n  return url;\n};","import api from \"!../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n            import content from \"!!../../node_modules/css-loader/dist/cjs.js!../../node_modules/sass-loader/dist/cjs.js!./index.scss\";\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nexport default content.locals || {};","\"use strict\";\n\nvar isOldIE = function isOldIE() {\n  var memo;\n  return function memorize() {\n    if (typeof memo === 'undefined') {\n      // Test for IE <= 9 as proposed by Browserhacks\n      // @see http://browserhacks.com/#hack-e71d8692f65334173fee715c222cb805\n      // Tests for existence of standard globals is to allow style-loader\n      // to operate correctly into non-standard environments\n      // @see https://github.com/webpack-contrib/style-loader/issues/177\n      memo = Boolean(window && document && document.all && !window.atob);\n    }\n\n    return memo;\n  };\n}();\n\nvar getTarget = function getTarget() {\n  var memo = {};\n  return function memorize(target) {\n    if (typeof memo[target] === 'undefined') {\n      var styleTarget = document.querySelector(target); // Special case to return head of iframe instead of iframe itself\n\n      if (window.HTMLIFrameElement && styleTarget instanceof window.HTMLIFrameElement) {\n        try {\n          // This will throw an exception if access to iframe is blocked\n          // due to cross-origin restrictions\n          styleTarget = styleTarget.contentDocument.head;\n        } catch (e) {\n          // istanbul ignore next\n          styleTarget = null;\n        }\n      }\n\n      memo[target] = styleTarget;\n    }\n\n    return memo[target];\n  };\n}();\n\nvar stylesInDom = [];\n\nfunction getIndexByIdentifier(identifier) {\n  var result = -1;\n\n  for (var i = 0; i < stylesInDom.length; i++) {\n    if (stylesInDom[i].identifier === identifier) {\n      result = i;\n      break;\n    }\n  }\n\n  return result;\n}\n\nfunction modulesToDom(list, options) {\n  var idCountMap = {};\n  var identifiers = [];\n\n  for (var i = 0; i < list.length; i++) {\n    var item = list[i];\n    var id = options.base ? item[0] + options.base : item[0];\n    var count = idCountMap[id] || 0;\n    var identifier = \"\".concat(id, \" \").concat(count);\n    idCountMap[id] = count + 1;\n    var index = getIndexByIdentifier(identifier);\n    var obj = {\n      css: item[1],\n      media: item[2],\n      sourceMap: item[3]\n    };\n\n    if (index !== -1) {\n      stylesInDom[index].references++;\n      stylesInDom[index].updater(obj);\n    } else {\n      stylesInDom.push({\n        identifier: identifier,\n        updater: addStyle(obj, options),\n        references: 1\n      });\n    }\n\n    identifiers.push(identifier);\n  }\n\n  return identifiers;\n}\n\nfunction insertStyleElement(options) {\n  var style = document.createElement('style');\n  var attributes = options.attributes || {};\n\n  if (typeof attributes.nonce === 'undefined') {\n    var nonce = typeof __webpack_nonce__ !== 'undefined' ? __webpack_nonce__ : null;\n\n    if (nonce) {\n      attributes.nonce = nonce;\n    }\n  }\n\n  Object.keys(attributes).forEach(function (key) {\n    style.setAttribute(key, attributes[key]);\n  });\n\n  if (typeof options.insert === 'function') {\n    options.insert(style);\n  } else {\n    var target = getTarget(options.insert || 'head');\n\n    if (!target) {\n      throw new Error(\"Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.\");\n    }\n\n    target.appendChild(style);\n  }\n\n  return style;\n}\n\nfunction removeStyleElement(style) {\n  // istanbul ignore if\n  if (style.parentNode === null) {\n    return false;\n  }\n\n  style.parentNode.removeChild(style);\n}\n/* istanbul ignore next  */\n\n\nvar replaceText = function replaceText() {\n  var textStore = [];\n  return function replace(index, replacement) {\n    textStore[index] = replacement;\n    return textStore.filter(Boolean).join('\\n');\n  };\n}();\n\nfunction applyToSingletonTag(style, index, remove, obj) {\n  var css = remove ? '' : obj.media ? \"@media \".concat(obj.media, \" {\").concat(obj.css, \"}\") : obj.css; // For old IE\n\n  /* istanbul ignore if  */\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = replaceText(index, css);\n  } else {\n    var cssNode = document.createTextNode(css);\n    var childNodes = style.childNodes;\n\n    if (childNodes[index]) {\n      style.removeChild(childNodes[index]);\n    }\n\n    if (childNodes.length) {\n      style.insertBefore(cssNode, childNodes[index]);\n    } else {\n      style.appendChild(cssNode);\n    }\n  }\n}\n\nfunction applyToTag(style, options, obj) {\n  var css = obj.css;\n  var media = obj.media;\n  var sourceMap = obj.sourceMap;\n\n  if (media) {\n    style.setAttribute('media', media);\n  } else {\n    style.removeAttribute('media');\n  }\n\n  if (sourceMap && typeof btoa !== 'undefined') {\n    css += \"\\n/*# sourceMappingURL=data:application/json;base64,\".concat(btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))), \" */\");\n  } // For old IE\n\n  /* istanbul ignore if  */\n\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    while (style.firstChild) {\n      style.removeChild(style.firstChild);\n    }\n\n    style.appendChild(document.createTextNode(css));\n  }\n}\n\nvar singleton = null;\nvar singletonCounter = 0;\n\nfunction addStyle(obj, options) {\n  var style;\n  var update;\n  var remove;\n\n  if (options.singleton) {\n    var styleIndex = singletonCounter++;\n    style = singleton || (singleton = insertStyleElement(options));\n    update = applyToSingletonTag.bind(null, style, styleIndex, false);\n    remove = applyToSingletonTag.bind(null, style, styleIndex, true);\n  } else {\n    style = insertStyleElement(options);\n    update = applyToTag.bind(null, style, options);\n\n    remove = function remove() {\n      removeStyleElement(style);\n    };\n  }\n\n  update(obj);\n  return function updateStyle(newObj) {\n    if (newObj) {\n      if (newObj.css === obj.css && newObj.media === obj.media && newObj.sourceMap === obj.sourceMap) {\n        return;\n      }\n\n      update(obj = newObj);\n    } else {\n      remove();\n    }\n  };\n}\n\nmodule.exports = function (list, options) {\n  options = options || {}; // Force single-tag solution on IE6-9, which has a hard limit on the # of <style>\n  // tags it will allow on a page\n\n  if (!options.singleton && typeof options.singleton !== 'boolean') {\n    options.singleton = isOldIE();\n  }\n\n  list = list || [];\n  var lastIdentifiers = modulesToDom(list, options);\n  return function update(newList) {\n    newList = newList || [];\n\n    if (Object.prototype.toString.call(newList) !== '[object Array]') {\n      return;\n    }\n\n    for (var i = 0; i < lastIdentifiers.length; i++) {\n      var identifier = lastIdentifiers[i];\n      var index = getIndexByIdentifier(identifier);\n      stylesInDom[index].references--;\n    }\n\n    var newLastIdentifiers = modulesToDom(newList, options);\n\n    for (var _i = 0; _i < lastIdentifiers.length; _i++) {\n      var _identifier = lastIdentifiers[_i];\n\n      var _index = getIndexByIdentifier(_identifier);\n\n      if (stylesInDom[_index].references === 0) {\n        stylesInDom[_index].updater();\n\n        stylesInDom.splice(_index, 1);\n      }\n    }\n\n    lastIdentifiers = newLastIdentifiers;\n  };\n};","module.exports = \"data:image/svg+xml;base64,PHN2ZyB2ZXJzaW9uPSIxLjEiIGlkPSJDYXBhXzEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4IiB2aWV3Qm94PSIwIDAgNTEyIDUxMiIgc3R5bGU9ImVuYWJsZS1iYWNrZ3JvdW5kOm5ldyAwIDAgNTEyIDUxMjsiIHhtbDpzcGFjZT0icHJlc2VydmUiPiA8cG9seWdvbiBwb2ludHM9IjM2MSw4Ljc4OSAzNjEsOTAgNDQyLjIxMSw5MCAiLz4gPHBvbHlnb24gcG9pbnRzPSIzMTYsMjE0Ljc1IDI4MC45OTQsMjQxIDMyNC45OTQsMjc0LjAwMyAzMDcuMDA2LDI5Ny45OTcgMTk2LDIxNC43NSA2MSwzMjMuMTc0IDYxLDM2MSA0NTEsMzYxIDQ1MSwzMjMuMTc0ICIvPiA8cGF0aCBkPSJNMTY2LDkwYy04LjI3NiwwLTE1LDYuNzI0LTE1LDE1czYuNzI0LDE1LDE1LDE1czE1LTYuNzI0LDE1LTE1UzE3NC4yNzYsOTAsMTY2LDkweiIvPiA8cGF0aCBkPSJNNjEsMzkxdjEyMWgzOTBWMzkxSDYxeiBNMzMxLDQ1MUgxODF2LTMwaDE1MFY0NTF6Ii8+IDxwYXRoIGQ9Ik0zMzEsMTIwVjBINjF2Mjg0Ljg3NEwxOTYsMTc3LjI1bDYwLjAwMiw0NS4wMDVMMzE2LDE3Ny4yNWwxMzUsMTA3LjYyNFYxMjBIMzMxeiBNMTY2LDE1MGMtMjQuODE0LDAtNDUtMjAuMTg2LTQ1LTQ1IGMwLTI0LjgxNCwyMC4xODYtNDUsNDUtNDVjMjQuODE0LDAsNDUsMjAuMTg2LDQ1LDQ1QzIxMSwxMjkuODE0LDE5MC44MTQsMTUwLDE2NiwxNTB6Ii8+IDwvc3ZnPiA=\"","module.exports = \"data:image/svg+xml;base64,PHN2ZyB2ZXJzaW9uPSIxLjEiIGlkPSJDYXBhXzEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4IiB3aWR0aD0iNDMxLjk4NXB4IiBoZWlnaHQ9IjQzMS45ODVweCIgdmlld0JveD0iMCAwIDQzMS45ODUgNDMxLjk4NSIgc3R5bGU9ImVuYWJsZS1iYWNrZ3JvdW5kOm5ldyAwIDAgNDMxLjk4NSA0MzEuOTg1OyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+IDxnPiA8cGF0aCBkPSJNNDIzLjI1Nyw1MS44MjljLTAuODA4LTIuMDQ1LTIuNjctMy40ODQtNC44NTMtMy43NTFjLTIuMTc3LTAuMjY2LTQuMzM1LDAuNjgyLTUuNjEyLDIuNDcyIGMtNy41ODEsMTAuNjI5LTE3LjUyOSwxNC4xNzItMjkuMDUzLDE4LjI3NWMtOS4yOTIsMy4zMS0xOC45MDEsNi43My0yOS4yODYsMTQuMTg2Yy0xNC42ODcsMTAuNTQ0LTIxLjQwNSwyNC45MTctMTguMDU1LDM4LjU0IGwtMC4zNTgsMC40NTljLTYuMTMzLTguODk3LTEyLjgwNi0xNy4xMjYtMTkuODQ4LTI0LjQ3NGMtMzIuOTQ3LTM0LjM3OC03OC45ODQtNTUuMDQ2LTEyNi4zMTEtNTYuNzAzIGMtMi4wODUtMC4wNzMtNC4yMDQtMC4xMS02LjI5OC0wLjExYy01Mi44NDYsMC0xMDMuNDI4LDIzLjYyNC0xMzguNzc1LDY0LjgxM0M5LjY0NiwxNDYuNTEyLTUuOTM5LDE5OS44NTMsMi4wNTEsMjUxLjg4MiBjMC42NjgsNC4zNDksMS41MDQsOC43NDMsMi40ODcsMTMuMDYzYzEyLjk5Niw1Ny4yMDIsNDYuMTg5LDEwMC43MTcsOTEuMDY5LDExOS4zODNjMTEuMDYzLDQuNjAyLDIyLjIyMiw2LjkzNCwzMy4xNjMsNi45MzQgYzI3LjE4MywwLDUwLjkyNi0xNC41MzksNjUuMTQzLTM5Ljg4OWM1LjQwNC05LjY0Niw4Ljg5MS0xOS42MjEsMTAuMzYtMjkuNjUxYzAuODY2LTUuOTIsMC4yNzQtMTEuODM1LTAuMy0xNy41NjcgYy0wLjU5MS01LjktMS4xNDktMTEuNDc2LTAuMjU2LTE3LjA5YzIuMDQ3LTEyLjg2OSwxMS4wMzYtMjAuNTUzLDI0LjA0Ny0yMC41NTNjMy43MDEsMCw3LjQ4MywwLjYwOSwxMS4yNiwxLjgxMiBjLTQuNDIyLDguMTEtOC40MzgsMTUuODU0LTExLjk0NywyMy4wMzJjLTcuNDM3LDE1LjIxMi0xMi41NjcsMjcuODEtMTUuMjUyLDM3LjQ0Yy0xLjY1NSw1LjkzOS02LjA1MiwyMS43MjIsNC42NywyOS4xNjQgYzMuNDA1LDIuMzYzLDcuNzIyLDMuMTk3LDEyLjIxNSwyLjM2MWM0LjA0OS0wLjc1MiwxNi4zNjktMy4wNDEsNTEuMzc4LTQyLjg5NmM5LjM5Ni0xMC42OTUsMTkuNTIxLTIzLjA3MiwzMC4xMDQtMzYuNzk0IGMyNy4xNjgtOS4xNSw0OC4zMS0zMS45MjEsNTMuOTAzLTU4LjA4N2MxLjQtNi41NDEsMS45ODQtMTMuNTQxLDEuNzM1LTIwLjgxMmMxMC4xNzItMTUuNzIsMTkuMDk0LTMwLjM4OCwyOC4wNzItNDYuMTU2IGMwLjE3Mi0wLjMwNCwwLjM0Mi0wLjYyOCwwLjUxLTAuOTZjMTMuMDMxLTMuNTY5LDI0LjI1NC0xMy43MSwzMC44NDItMjcuODkxQzQzNC44NzIsMTA2LjAyOCw0MzQuMTYzLDc5LjQyOCw0MjMuMjU3LDUxLjgyOXogTTI3Ni4zODUsMTQ5LjgzNGMtNC43MTMsNy40ODUtMTIuODE0LDExLjk1NC0yMS42NzMsMTEuOTU0Yy00LjgxLDAtOS41MTUtMS4zNjEtMTMuNjA1LTMuOTM3IGMtNS43ODItMy42NDItOS44MDMtOS4zMTctMTEuMzE2LTE1Ljk4cy0wLjM0NS0xMy41MTgsMy4yOTgtMTkuMzAxYzQuNzE0LTcuNDg1LDEyLjgxNi0xMS45NTQsMjEuNjc1LTExLjk1NCBjNC44MTEsMCw5LjUxNSwxLjM2MSwxMy42MDQsMy45MzhjNS43ODIsMy42NCw5LjgwMiw5LjMxNSwxMS4zMTYsMTUuOTc5QzI4MS4xOTcsMTM3LjE5NywyODAuMDI2LDE0NC4wNTEsMjc2LjM4NSwxNDkuODM0eiBNMzA5LjU5MiwxOTYuMTg3YzEyLjkzNC0xOS4wNTcsMjYuNjEyLTM4LDM5LjYwNC01NC44NWMyLjEwNiwxLjkwMiw0LjQ2MSwzLjc2LDcuMDEyLDUuNTNjNC4yMjcsMi45MzMsOC42NDgsNS4yMDEsMTMuMTY0LDYuNzU0IGMtMTAuOTY5LDE4Ljc1OC0yMi43NjMsMzcuMzQyLTM3LjA0Myw1OC4zNzVjLTIzLjQ2MywzNC41NzEtNDcuODU5LDY2LjY4NC02OC42OTUsOTAuNDI0IGMtMTEuNjM4LDEzLjI2LTIxLjgyMywyMy40OTgtMjkuNjcxLDI5LjgzOWMzLjAyOS05LjY5LDguODE4LTIyLjk4OSwxNi44NzUtMzguNzQ2IEMyNjUuMjQ1LDI2NS4zMzYsMjg2LjExMSwyMzAuNzcyLDMwOS41OTIsMTk2LjE4N3ogTTgyLjUwNiwxOTYuMDIzYy00LjgxMSwwLTkuNTE2LTEuMzYxLTEzLjYwNy0zLjkzOCBjLTUuNzgyLTMuNjQxLTkuODAxLTkuMzE0LTExLjMxNS0xNS45NzljLTEuNTE0LTYuNjY0LTAuMzQyLTEzLjUxOSwzLjMwMS0xOS4zMDJjNC43MTEtNy40ODQsMTIuODEzLTExLjk1MywyMS42NzEtMTEuOTUzIGM0LjgxMiwwLDkuNTE3LDEuMzYxLDEzLjYwNywzLjkzOGMxMS45MzYsNy41MTgsMTUuNTMyLDIzLjM0NSw4LjAxOSwzNS4yNzlDOTkuNDY2LDE5MS41NTQsOTEuMzYzLDE5Ni4wMjMsODIuNTA2LDE5Ni4wMjN6IE01NS42ODgsMjUyLjM1OGM0LjcxMy03LjQ4NiwxMi44MTQtMTEuOTU1LDIxLjY3My0xMS45NTVjNC44MSwwLDkuNTE0LDEuMzYyLDEzLjYwNiwzLjkzOGM1Ljc4MiwzLjY0MSw5LjgwMSw5LjMxNSwxMS4zMTUsMTUuOTc5IGMxLjUxNSw2LjY2MiwwLjM0MywxMy41MTYtMy4zMDEsMTkuMzAxYy00LjcxMSw3LjQ4My0xMi44MTMsMTEuOTUzLTIxLjY3MSwxMS45NTNjLTQuODExLDAtOS41MTctMS4zNjEtMTMuNjA5LTMuOTM4IGMtNS43ODItMy42NDItOS44LTkuMzE1LTExLjMxMy0xNS45NzlDNTAuODc2LDI2NC45OTUsNTIuMDQ5LDI1OC4xNCw1NS42ODgsMjUyLjM1OHogTTEzNy42MiwxMDAuNDE0IGM0LjcxMy03LjQ4NSwxMi44MTUtMTEuOTU0LDIxLjY3My0xMS45NTRjNC44MDksMCw5LjUxNCwxLjM2MSwxMy42MDQsMy45MzdjMTEuOTM3LDcuNTE2LDE1LjUzMywyMy4zNDQsOC4wMTksMzUuMjggYy00LjcxNSw3LjQ4Ni0xMi44MTcsMTEuOTU1LTIxLjY3NSwxMS45NTVjLTQuODEsMC05LjUxNS0xLjM2MS0xMy42MDUtMy45MzhjLTUuNzgxLTMuNjQtOS43OTktOS4zMTQtMTEuMzEzLTE1Ljk3OSBDMTMyLjgwNywxMTMuMDUyLDEzMy45NzksMTA2LjE5OCwxMzcuNjIsMTAwLjQxNHoiLz4gPC9nPiA8Zz4gPC9nPiA8Zz4gPC9nPiA8Zz4gPC9nPiA8Zz4gPC9nPiA8Zz4gPC9nPiA8Zz4gPC9nPiA8Zz4gPC9nPiA8Zz4gPC9nPiA8Zz4gPC9nPiA8Zz4gPC9nPiA8Zz4gPC9nPiA8Zz4gPC9nPiA8Zz4gPC9nPiA8Zz4gPC9nPiA8Zz4gPC9nPiA8L3N2Zz4g\"","module.exports = \"data:image/svg+xml;base64,PHN2ZyB2ZXJzaW9uPSIxLjEiIGlkPSJDYXBhXzEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4IiB3aWR0aD0iMTE2Ljk1OHB4IiBoZWlnaHQ9IjExNi45NThweCIgdmlld0JveD0iMCAwIDExNi45NTggMTE2Ljk1OCIgc3R5bGU9ImVuYWJsZS1iYWNrZ3JvdW5kOm5ldyAwIDAgMTE2Ljk1OCAxMTYuOTU4OyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+IDxwYXRoIGQ9Ik01OC40NzIsOTIuMzI0YzEuMDQyLDAsMi4wMjUtMC40MDgsMi43NjItMS4xNDVsMjQuODY0LTI0Ljg2NWMwLjczOS0wLjczNiwxLjE0NS0xLjcyMSwxLjE0NS0yLjc2MiBzLTAuNDA1LTIuMDI2LTEuMTQ1LTIuNzY0bC0yNC44Ni0yNC44NjJjLTEuNDc3LTEuNDc0LTQuMDQ4LTEuNDc0LTUuNTI0LDBMMzAuODQ2LDYwLjc5Yy0wLjczNiwwLjczNi0xLjE0NSwxLjcyMy0xLjE0NSwyLjc2NCBzMC40MDgsMi4wMjQsMS4xNDUsMi43NjJsMjQuODYzLDI0Ljg2NEM1Ni40NDYsOTEuOTE2LDU3LjQzLDkyLjMyNCw1OC40NzIsOTIuMzI0eiIvPiA8cGF0aCBkPSJNMTAxLjIzNywzMS41NzdjLTguNTQzLTExLjQxOS0yMS4wMjItMTguODMyLTM1LjEzOC0yMC44NzNjLTguNTYyLTEuMjMxLTE3LjI4My0wLjM2Ni0yNS40MTcsMi41MzNMMzQuOTc0LDEuODMzIGMtMC41NjQtMS4xMjktMS43NDctMS45NDgtMy4xODYtMS44MTljLTEuMzQ3LDAuMDk2LTIuNDg4LDAuOTgtMi45MTEsMi4yNTVsLTcuMzcxLDIyLjExN2MtMC41NzIsMS43MjQsMC4zNjIsMy42MDIsMi4wOTksNC4xODggbDIyLjExMyw3LjM2N2MxLjI1MSwwLjQwOCwyLjY5LDAuMDE1LDMuNTQ0LTAuOTczYzAuODg1LTEuMDE2LDEuMDY0LTIuNDUzLDAuNDYyLTMuNjUxbC01LjUyNS0xMS4wNDEgYzYuNjc3LTIuMjE3LDEzLjc5Mi0yLjg1LDIwLjc4Ni0xLjgzNWMxMi4wNTIsMS43MzYsMjIuNzAxLDguMDY0LDI5Ljk5NiwxNy44MjFjNy4yNzQsOS43MzIsMTAuMzI0LDIxLjczNSw4LjU4NCwzMy43OTkgYy0xLjc0LDEyLjA2Mi04LjA2MiwyMi43MTYtMTcuNzk0LDI5Ljk5NWMtOS43MjMsNy4yNzEtMjEuNzc4LDEwLjM0NC0zMy44MDcsOC42MDZjLTEyLjA1Mi0xLjczNS0yMi43MDEtOC4wNjMtMjkuOTkyLTE3LjgxOSBjLTUuODE0LTcuNzY5LTguOTUtMTYuOTg2LTkuMDc2LTI2LjY1NGMtMC4wMjctMi4xMjktMS43ODItMy44NTYtMy45NTctMy44NTZjLTIuMTU2LDAuMDMtMy44ODQsMS44MDUtMy44NTcsMy45NiBDNS4yMyw3NS42MjEsOC45MDksODYuNDIxLDE1LjcxNSw5NS41MjljOC41MzksMTEuNDE4LDIxLjAxNCwxOC44MzIsMzUuMTMxLDIwLjg3M2MyLjU3NSwwLjM2OSw1LjE3NywwLjU1Nyw3LjczNywwLjU1NyBjMTEuNTM3LDAsMjIuNTU2LTMuNjgyLDMxLjg2NS0xMC42NDVjMTEuNDIzLTguNTQzLDE4LjgzNi0yMS4wMiwyMC44NjktMzUuMTM1QzExMy4zNTgsNTcuMDY2LDEwOS43NzUsNDMsMTAxLjIzNywzMS41Nzd6Ii8+IDwvc3ZnPiA=\"","module.exports = \"data:image/svg+xml;base64,PHN2ZyBpZD0iQ2FwYV8xIiBlbmFibGUtYmFja2dyb3VuZD0ibmV3IDAgMCA1MTIgNTEyIiBoZWlnaHQ9IjUxMiIgdmlld0JveD0iMCAwIDUxMiA1MTIiIHdpZHRoPSI1MTIiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGc+PHBhdGggZD0ibTI0MSA0NTFoMzB2MzBoLTMweiIvPjxwYXRoIGQ9Im0yNDEgMzkxaDMwdjMwaC0zMHoiLz48cGF0aCBkPSJtMjQxIDMzMWgzMHYzMGgtMzB6Ii8+PHBhdGggZD0ibTI0MSAyNzFoMzB2MzBoLTMweiIvPjxwYXRoIGQ9Im0yNDEgMjExaDMwdjMwaC0zMHoiLz48cGF0aCBkPSJtMjQxIDE1MWgzMHYzMGgtMzB6Ii8+PHBhdGggZD0ibTI0MSA5MWgzMHYzMGgtMzB6Ii8+PHBhdGggZD0ibTI0MSAzMWgzMHYzMGgtMzB6Ii8+PHBhdGggZD0ibTAgNDMzLjYyNSAyMDYtNjYuNzE2di0yMTEuMjQ5bC0yMDYtNzguNDJ6Ii8+PHBhdGggZD0ibTMwNiAxNTUuNjZ2MjExLjI0OWwyMDYgNjYuNzE2di0zNTYuMzg1eiIvPjwvZz48L3N2Zz4g\"","export const IIIF_EVENTS: { [event: string]: string } = {\n  CHANGE_FORMAT: \"iiif:format\",\n  CHANGE_QUALITY: \"iiif:quality\",\n  CHANGE_ROTATION: \"iiif:rotation\",\n  CHANGE_MIRRORING: \"iiif:mirroring\",\n};\n","import L, { Map, Point, TileLayer, TileLayerOptions, TileEvent, Util } from \"leaflet\";\nimport {\n  DEFAULT_OPTIONS,\n  SERVER_CAPABILITIES_DEFAULT,\n  IIIFLayerOptions,\n  ServerCapabilities,\n  TileUrlParams,\n} from \"./types\";\nimport { IIIF_EVENTS } from \"./event\";\nimport { computeServerCapabilities } from \"./utils/server-capabilities\";\nimport { templateUrl } from \"./utils/helper\";\nimport { projectPoint, projectSquare } from \"./utils/projection\";\n\nexport class IIIFLayer extends TileLayer {\n  // Layer options\n  public options: IIIFLayerOptions;\n\n  // Leaflet map\n  map: Map | null = null;\n  _url: string;\n\n  // Promise of the\n  initializePromise: Promise<void>;\n\n  // Server capabilities\n  server: ServerCapabilities = SERVER_CAPABILITIES_DEFAULT;\n\n  // Dimension of the image\n  height: number = 0;\n  width: number = 0;\n\n  zoomLayers: Array<{\n    // Map zoom level\n    zoom: number;\n    // the scaling ratio\n    scale: number;\n    // height of the image at this scale\n    height: number;\n    // width of the image at this scale\n    width: number;\n    // number of tiles in x & y\n    tiles: [number, number];\n  }> = [];\n\n  /**\n   * IIIF Layer constructor.\n   *\n   * @param {string} url The IIIF info endpoint for an image  (ex: https://stacks.stanford.edu/image/iiif/hg676jb4964%2F0380_796-44/info.json)\n   * @param {object} options List of options for the layer\n   */\n  constructor(url: string, options: Partial<IIIFLayerOptions> = {}) {\n    super(url, options);\n    this.setUrl(templateUrl(url));\n  }\n\n  /**\n   * Initialize the layer by calling the info endpoint of the image,\n   * compute the server capabilities and set the initial state.\n   */\n  initialize(url: string, options: Partial<IIIFLayerOptions>): this {\n    this.initializePromise = new Promise(async (resolve, reject) => {\n      try {\n        // Calling the iiif info endpoint\n        const response = await fetch(url);\n        const data: any = await response.json();\n\n        // saving the image dimension\n        this.height = data.height;\n        this.width = data.width;\n\n        // server capabilities\n        this.server = computeServerCapabilities(data);\n\n        // Settings\n        this.options = Object.assign(\n          this.options,\n          DEFAULT_OPTIONS,\n          // Server pref\n          {\n            tileSize: this.server.tileSize,\n            tileFormat: this.server.formats[0],\n            quality: this.server.qualities.includes(\"native\") ? \"native\" : \"default\",\n            minZoom: this.server.minZoom,\n            maxZoom: this.server.maxZoom,\n          },\n          // User's options\n          options,\n        );\n        resolve();\n      } catch (e) {\n        reject(e);\n      }\n    });\n    return this;\n  }\n\n  onAdd(map: Map): this {\n    this.map = map;\n\n    // Wait for info.json fetch and parse to complete\n    this.initializePromise.then(() => {\n      // Compute image sizes\n      this.computeZoomLayers();\n\n      // calling super after we compute all the zoom\n      super.onAdd(map);\n\n      // Fit bounds\n      if (this.options.fitBounds) {\n        this.map.fitBounds(this.getBounds());\n      }\n\n      // Set max bound\n      if (this.options.setMaxBounds) {\n        this.map.setMaxBounds(this.getBounds());\n      }\n    });\n\n    // register events\n    this.registerEvents(map);\n\n    return this;\n  }\n\n  onRemove(map: Map): this {\n    // calling super\n    super.onRemove(map);\n\n    // Remove maxBounds set for this image\n    if (this.options.setMaxBounds) {\n      // bug in the type definition\n      map.setMaxBounds((null as unknown) as L.LatLngBoundsExpression);\n    }\n\n    // unregister events\n    this.unRegisterEvents(map);\n\n    return this;\n  }\n\n  /**\n   * Generate the tile IIIF url based on the tile coordinates\n   */\n  public getTileUrl(coords: L.Coords): string {\n    const z = coords[\"z\"];\n    const x = coords[\"x\"];\n    const y = coords[\"y\"];\n    const zoomLayer = this.zoomLayers.find(layer => layer.zoom === z);\n    if (!zoomLayer) throw new Error(`Can't create tile for zoom ${z}`);\n\n    // Handle rotation\n    const unprojectedSquare = projectSquare(-1 * this.options.rotation, {\n      bottomLeft: { x, y },\n      topRight: { x: x + 1, y: y + 1 },\n    });\n\n    const tileSizeX = this.options.tileSize.x / zoomLayer.scale;\n    const tileSizeY = this.options.tileSize.y / zoomLayer.scale;\n\n    // Compute the image region / bbox NW/SE\n    let minX = Math.min(unprojectedSquare.bottomLeft.x * tileSizeX, this.width);\n    let minY = Math.min(unprojectedSquare.bottomLeft.y * tileSizeY, this.height);\n    let maxX = Math.min(minX + tileSizeX, this.width);\n    let maxY = Math.min(minY + tileSizeY, this.height);\n\n    // In mirroring, if we do the diff with the width,\n    // we then have the bbox NE/SO,\n    // so we need to switch back to NW/SE by add/subs the diff\n    if (this.options.mirroring === true) {\n      const diffX = maxX - minX;\n      minX = this.width - minX - diffX;\n      maxX = this.width - maxX + diffX;\n    }\n\n    const params = {\n      format: this.options.tileFormat,\n      quality: this.options.quality,\n      mirroring: this.options.mirroring,\n      region: [minX, minY, Math.abs(maxX - minX), Math.abs(maxY - minY)],\n      rotation: (360 - this.options.rotation) % 360,\n      size: [Math.abs(maxX - minX), Math.abs(maxY - minY)].map(s => Math.ceil(s * zoomLayer.scale)) as [number, number],\n    };\n\n    return L.Util.template(this._url, {\n      format: params.format,\n      quality: params.quality,\n      mirroring: params.mirroring ? \"!\" : \"\",\n      region: params.region.join(\",\"),\n      rotation: params.rotation,\n      size: params.size.join(\",\"),\n    });\n  }\n\n  protected _isValidTile(coords: L.Coords) {\n    let isValid = false;\n    const x = coords[\"x\"];\n    const y = coords[\"y\"];\n    const z = coords[\"z\"];\n\n    // Handle rotation (leaflet axis are reversed, so a 90 rotation is in fact a -90 rotation)\n    const unprojectedSquare = projectSquare(-1 * this.options.rotation, {\n      bottomLeft: { x, y },\n      topRight: { x: x + 1, y: y + 1 },\n    });\n\n    if (this.options.minZoom <= z && z <= this.options.maxZoom) {\n      const originalZoomLayer = this.zoomLayers.find(layer => layer.zoom === z);\n      if (\n        0 <= unprojectedSquare.bottomLeft.x &&\n        unprojectedSquare.bottomLeft.x < originalZoomLayer.tiles[0] &&\n        0 <= unprojectedSquare.bottomLeft.y &&\n        unprojectedSquare.bottomLeft.y < originalZoomLayer.tiles[1]\n      )\n        isValid = true;\n    }\n    return isValid;\n  }\n\n  /**\n   * Compute the bounds of the layer.\n   */\n  private getBounds(): L.LatLngBounds {\n    let result = L.latLngBounds([0, 1], [1, 0]);\n\n    const originalZoomLayer = this.zoomLayers.find(layer => layer.scale === 1);\n    if (this.map !== null && originalZoomLayer) {\n      const projectedSquare = projectSquare(this.options.rotation, {\n        bottomLeft: { x: 0, y: originalZoomLayer.height },\n        topRight: { x: originalZoomLayer.width, y: 0 },\n      });\n\n      const sw = this.map.unproject(L.point(projectedSquare.bottomLeft), 0);\n      const ne = this.map.unproject(L.point(projectedSquare.topRight), 0);\n      result = L.latLngBounds(sw, ne);\n    }\n\n    return result;\n  }\n\n  /**\n   * Compute the different images by zoom level\n   */\n  private computeZoomLayers(): void {\n    this.zoomLayers = [];\n\n    let zoom = this.options.minZoom;\n    while (zoom <= this.options.maxZoom) {\n      const scale = Math.pow(2, zoom);\n      const height = Math.ceil(this.height * scale);\n      const width = Math.ceil(this.width * scale);\n      this.zoomLayers.push({\n        zoom,\n        scale,\n        height,\n        width,\n        tiles: [Math.ceil(width / this.options.tileSize.x), Math.ceil(height / this.options.tileSize.y)],\n      });\n      zoom++;\n    }\n    // Setting the min /max zoom in the options & map\n    this.map.setMaxZoom(this.zoomLayers[this.zoomLayers.length - 1].zoom);\n    this.map.setMinZoom(this.zoomLayers[0].zoom);\n  }\n\n  private registerEvents(map: Map): void {\n    this.on(\"tileload\", this.onTileLoadStyle);\n    map.on(IIIF_EVENTS.CHANGE_FORMAT, (e: any) => this.changeFormat(e.value));\n    map.on(IIIF_EVENTS.CHANGE_QUALITY, (e: any) => this.changeQuality(e.value));\n    map.on(IIIF_EVENTS.CHANGE_ROTATION, (e: any) => this.changeRotation(e.value));\n    map.on(IIIF_EVENTS.CHANGE_MIRRORING, (e: any) => this.changeMirroring(e.value));\n  }\n\n  private unRegisterEvents(map: Map): void {\n    this.off(\"tileload\", this.onTileLoadStyle);\n    map.off(IIIF_EVENTS.CHANGE_FORMAT, (e: any) => this.changeFormat(e.value));\n    map.off(IIIF_EVENTS.CHANGE_QUALITY, (e: any) => this.changeQuality(e.value));\n    map.off(IIIF_EVENTS.CHANGE_ROTATION, (e: any) => this.changeRotation(e.value));\n    map.off(IIIF_EVENTS.CHANGE_MIRRORING, (e: any) => this.changeMirroring(e.value));\n  }\n\n  private changeFormat(value: string): void {\n    this.options.tileFormat = value;\n    this.redraw();\n  }\n\n  private changeQuality(value: string): void {\n    this.options.quality = value;\n    this.redraw();\n  }\n\n  private changeRotation(value: number): void {\n    this.options.rotation = value;\n    // Set max bound\n    if (this.options.setMaxBounds) {\n      this.map.setMaxBounds(this.getBounds());\n    }\n    this.redraw();\n  }\n\n  private changeMirroring(value: boolean): void {\n    this.options.mirroring = value;\n    this.redraw();\n  }\n\n  /**\n   * Handle border of images when the tiles are not full.\n   */\n  private onTileLoadStyle(tile: TileEvent): void {\n    if (tile.tile.naturalWidth !== this.options.tileSize.x || tile.tile.naturalHeight !== this.options.tileSize.y) {\n      tile.tile.style.width = `${tile.tile.naturalWidth}px`;\n      tile.tile.style.height = `${tile.tile.naturalHeight}px`;\n\n      const rotation = this.options.rotation % 360;\n      switch (rotation) {\n        case 90:\n          tile.tile.style.top = `${this.options.tileSize.x - tile.tile.naturalHeight}px`;\n          tile.tile.style.right = `${this.options.tileSize.y - tile.tile.naturalWidth}px`;\n          break;\n        case 180:\n          tile.tile.style.top = `${this.options.tileSize.x - tile.tile.naturalHeight}px`;\n          tile.tile.style.left = `${this.options.tileSize.y - tile.tile.naturalWidth}px`;\n          break;\n        case 270:\n          tile.tile.style.top = \"0\";\n          tile.tile.style.bottom = `${this.options.tileSize.x - tile.tile.naturalHeight}px`;\n          tile.tile.style.left = `${this.options.tileSize.y - tile.tile.naturalWidth}px`;\n          break;\n      }\n    }\n  }\n}\n","import L, { Control, Map } from \"leaflet\";\nimport { IIIFLayer } from \"./layer\";\nimport { IIIF_EVENTS } from \"./event\";\nimport { DEFAULT_CONTROL_OPTIONS, IIIFControlOptions } from \"./types\";\n\nconst CONTROL_NAME = \"leaflet-control-iiif\";\n\nexport class IIIFControl extends Control {\n  // Control options\n  public options: IIIFControlOptions;\n\n  layer: IIIFLayer;\n  _container: HTMLElement;\n\n  /**\n   * IIIF Control constructor.\n   *\n   * @param {object} options List of options for the control\n   */\n  constructor(layer: IIIFLayer, options: Partial<IIIFControlOptions> = {}) {\n    super(Object.assign({}, DEFAULT_CONTROL_OPTIONS, options));\n    this.layer = layer;\n    this._container = L.DomUtil.create(\"div\", `${CONTROL_NAME} leaflet-bar`);\n  }\n\n  onAdd(map: Map): HTMLElement {\n    const container = this.getContainer();\n\n    // Waiting the init of the layer\n    this.layer.initializePromise.then(() => {\n      // Qualities\n      if (this.options.quality.enabled === true) {\n        const qualities = this.options.quality.values ? this.options.quality.values : this.layer.server.qualities;\n        this.createActions(\n          container,\n          this.options.quality.title,\n          `${CONTROL_NAME}-quality`,\n          this.options.quality.html,\n          qualities.map((quality: string) => {\n            return {\n              title: quality,\n              className: `${CONTROL_NAME}-quality-${quality}`,\n              innerHTML: quality,\n              fn: () => {\n                map.fire(IIIF_EVENTS.CHANGE_QUALITY, { value: quality });\n              },\n            };\n          }),\n        );\n      }\n\n      // Formats\n      if (this.options.format.enabled === true) {\n        const formats = this.options.format.values ? this.options.format.values : this.layer.server.formats;\n        this.createActions(\n          container,\n          this.options.format.title,\n          `${CONTROL_NAME}-format`,\n          this.options.format.html,\n          formats.map((format: string) => {\n            return {\n              title: format,\n              className: `${CONTROL_NAME}-format-${format}`,\n              innerHTML: format,\n              fn: () => {\n                map.fire(IIIF_EVENTS.CHANGE_FORMAT, { value: format });\n              },\n            };\n          }),\n        );\n      }\n\n      // Formats\n      if (this.options.rotation.enabled === true && this.layer.server.rotation === true) {\n        const rotations = this.options.rotation.values ? this.options.rotation.values : [\"0\", \"90\", \"180\", \"270\"];\n        this.createActions(\n          container,\n          this.options.rotation.title,\n          `${CONTROL_NAME}-rotation`,\n          this.options.rotation.html,\n          rotations.map((rotation: string) => {\n            return {\n              title: rotation,\n              className: `${CONTROL_NAME}-rotation-${rotation}`,\n              innerHTML: rotation,\n              fn: () => {\n                map.fire(IIIF_EVENTS.CHANGE_ROTATION, { value: Number.parseInt(rotation) });\n              },\n            };\n          }),\n        );\n      }\n\n      // Mirroring\n      if (this.options.mirroring.enabled === true && this.layer.server.mirroring === true) {\n        this.createButton(\n          container,\n          this.options.mirroring.title,\n          `${CONTROL_NAME}-mirroring`,\n          this.options.mirroring.html,\n          () => {\n            map.fire(IIIF_EVENTS.CHANGE_MIRRORING, { value: !this.layer.options.mirroring });\n          },\n        );\n      }\n    });\n\n    return container;\n  }\n\n  /**\n   * Create a button\n   */\n  private createActions(\n    container: HTMLElement,\n    title: string,\n    className: string,\n    innerHTML: string,\n    actions: Array<{ title: string; className: string; innerHTML: string; fn: () => void }>,\n  ) {\n    const actionsWrapper = L.DomUtil.create(\"div\", className);\n    this.createButton(actionsWrapper, title, className, innerHTML, () => {\n      if (container.dataset.opened === className) container.dataset.opened = \"\";\n      else container.dataset.opened = className;\n    });\n\n    const actionsList = L.DomUtil.create(\"ul\", className);\n    actions.forEach(action => {\n      const li = L.DomUtil.create(\"li\", \"\", actionsList);\n      this.createButton(li, action.title, action.className, action.innerHTML, () => {\n        action.fn();\n        container.dataset.opened = \"\";\n      });\n      actionsList.appendChild(li);\n    });\n    actionsWrapper.appendChild(actionsList);\n\n    container.appendChild(actionsWrapper);\n  }\n\n  /**\n   * Create a button\n   */\n  private createButton(\n    container: HTMLElement,\n    title: string,\n    className: string,\n    innerHTML: string,\n    fn: () => void,\n  ): HTMLElement {\n    var link: HTMLElement = L.DomUtil.create(\"a\", className, container);\n    link.title = title;\n    link.innerHTML = innerHTML;\n    L.DomEvent.on(link, \"mousedown dblclick\", L.DomEvent.stopPropagation).on(link, \"click\", fn, this);\n    return link;\n  }\n}\n","import L, { ControlOptions, Point, TileLayerOptions } from \"leaflet\";\n\n/**\n * List the capabilities of the server.\n */\nexport interface ServerCapabilities {\n  // IIIF version of the server (1.1, 2.0 or 3.0)\n  version: string;\n  // List of supported formats\n  formats: Array<string>;\n  // List of supported qualities\n  qualities: Array<string>;\n  // Support 90s ratotation ?\n  rotation: boolean;\n  // Support mirroring ?\n  mirroring: boolean;\n  // min/max zoom (remated to Scale factors)\n  minZoom: number;\n  maxZoom: number;\n  // Preferd tile size\n  tileSize: Point | null;\n}\n\nexport const SERVER_CAPABILITIES_DEFAULT: ServerCapabilities = {\n  version: \"3.0\",\n  formats: [],\n  qualities: [],\n  rotation: false,\n  mirroring: false,\n  tileSize: null,\n  minZoom: 0,\n  maxZoom: 0,\n};\n\n/**\n * Settings of the layer.\n */\nexport interface IIIFLayerOptions extends TileLayerOptions {\n  // Size of the tile (as a square)\n  // If not specified and the server has a preference, we take it, otherwise 256\n  tileSize: Point;\n  // Format of the tiles (ie png, jpg, ...).\n  // Default is 'jpg'\n  tileFormat: string;\n  // Quality\n  quality: string;\n  // Rotation (ex: 0, 90, 180, 270).\n  // Default: 0\n  rotation: number;\n  // Mirroring\n  // Default false\n  mirroring: boolean;\n  // When initialiazed the layer, do you want to see the full picture ?\n  fitBounds: boolean;\n  // Does the user can pan outside the image ?\n  setMaxBounds: boolean;\n}\n\nexport const DEFAULT_OPTIONS: IIIFLayerOptions = {\n  tileSize: L.point(256, 256),\n  tileFormat: \"jpg\",\n  quality: \"default\",\n  rotation: 0,\n  mirroring: false,\n  fitBounds: true,\n  setMaxBounds: false,\n  minZoom: 0,\n  maxZoom: 0,\n  zoomOffset: 0,\n};\n\ninterface IIIFControlAction {\n  enabled: boolean;\n  title: string;\n  html: string;\n  // if undefined, we take the one from the server\n  values?: Array<string>;\n}\n\nexport interface IIIFControlOptions extends ControlOptions {\n  quality: IIIFControlAction;\n  format: IIIFControlAction;\n  rotation: IIIFControlAction;\n  mirroring: IIIFControlAction;\n}\n\nexport const DEFAULT_CONTROL_OPTIONS: IIIFControlOptions = {\n  quality: {\n    enabled: true,\n    title: \"Quality\",\n    html: `<span />`,\n  },\n  format: {\n    enabled: true,\n    title: \"Format\",\n    html: `<span />`,\n  },\n  rotation: {\n    enabled: true,\n    title: \"Rotation\",\n    html: `<span />`,\n  },\n  mirroring: {\n    enabled: true,\n    title: \"Mirroring\",\n    html: `<span />`,\n  },\n};\n\nexport interface TileUrlParams {\n  format: string;\n  quality: string;\n  mirroring: boolean;\n  region: [number, number, number, number];\n  rotation: number;\n  size: [number, number];\n}\n","import { TileUrlParams } from \"../types\";\nimport L from \"leaflet\";\n\n/**\n * Construct the tiles url template from the iiif image url\n */\nexport function templateUrl(url: string): string {\n  return url.replace(/info.json$/, \"{region}/{size}/{mirroring}{rotation}/{quality}.{format}\");\n}\n","export type Point = { x: number; y: number };\nexport type Square = { bottomLeft: Point; topRight: Point };\n\n/**\n * Rotation projection of a point around the origin 0,0.\n *\n * @param rotation The rotation in degree (ex: 90)\n * @param point The point to project\n * @returns The projected point for the specified rotation.\n */\nexport function projectPoint(rotation: number, point: Point): Point {\n  // negate to follow the direction 180-0\n  const rotationInRadian = (-1 * rotation * Math.PI) / 180;\n  return {\n    x: Math.round(point.x * Math.cos(rotationInRadian) - point.y * Math.sin(rotationInRadian)),\n    y: Math.round(point.y * Math.cos(rotationInRadian) + point.x * Math.sin(rotationInRadian)),\n  };\n}\n\n/**\n * Rotation projection of a square, around the origin 0,0.\n *\n * @param rotation The rotation in degree (ex: 90)\n * @param square The square to project\n * @returns The projected square for the specified rotation.\n */\nexport function projectSquare(rotation: number, square: Square): Square {\n  const p1 = projectPoint(rotation, square.bottomLeft);\n  const p2 = projectPoint(rotation, square.topRight);\n  const minX = Math.min(p1.x, p2.x);\n  const maxX = Math.max(p1.x, p2.x);\n  const minY = Math.min(p1.y, p2.y);\n  const maxY = Math.max(p1.y, p2.y);\n  return {\n    bottomLeft: { x: minX, y: minY },\n    topRight: { x: maxX, y: maxY },\n  };\n}\n","import L from \"leaflet\";\nimport { SERVER_CAPABILITIES_DEFAULT, ServerCapabilities } from \"../types\";\n\n/**\n * Compute the server capabilities from the response of the info.\n */\nexport function computeServerCapabilities(data: any): ServerCapabilities {\n  let uri = `${data[\"@context\"]}`;\n\n  // in v3 it can be an array where the last item is the uri\n  if (data[\"@context\"] instanceof Array) {\n    uri = data[\"@context\"][data[\"@context\"].length - 1];\n  }\n\n  switch (uri) {\n    case \"http://library.stanford.edu/iiif/image-api/1.1/context.json\":\n      return computeServerCapabilitiesForV1(data);\n      break;\n    case \"http://iiif.io/api/image/2/context.json\":\n      return computeServerCapabilitiesForV2(data);\n      break;\n    case \"http://iiif.io/api/image/3/context.json\":\n    default:\n      return computeServerCapabilitiesForV3(data);\n      break;\n  }\n}\n\n/**\n * Compute the server capabilities for a IIIF server in v1.1.\n * @see https://iiif.io/api/image/1.1/compliance/\n */\nexport function computeServerCapabilitiesForV1(data: any): ServerCapabilities {\n  const capabilities = Object.assign({}, SERVER_CAPABILITIES_DEFAULT);\n  capabilities.version = \"1.1\";\n\n  // Search the level compliance level\n  const match = `${data.profile}`.match(/^http:\\/\\/library.stanford.edu\\/iiif\\/image-api\\/1.1\\/compliance.html#(.*)$/);\n  const level = match && match.length === 2 ? match[1] : \"level0\";\n\n  // Defined capabilities per level\n  switch (level) {\n    case \"level2\":\n      capabilities.rotation = true;\n      capabilities.formats = [\"jpg\", \"png\"];\n      capabilities.qualities = [\"native\", \"color\", \"grey\", \"bitonial\"];\n      break;\n    case \"level1\":\n      capabilities.rotation = true;\n      capabilities.formats = [\"jpg\"];\n      capabilities.qualities = [\"native\"];\n      break;\n    // level0\n    default:\n      capabilities.rotation = false;\n      capabilities.formats = [\"jpg\"];\n      capabilities.qualities = [\"native\"];\n      break;\n  }\n  // Formats\n  if (data.formats) capabilities.formats = data.formats;\n\n  // Qualities\n  if (data.qualities) capabilities.qualities = data.qualities;\n\n  // Tiles size\n  if (data.tile_width)\n    capabilities.tileSize = L.point(data.tile_width, data.tile_height ? data.tile_height : data.tile_width);\n\n  // Scale factors\n  if (data.scale_factors && data.scale_factors.length > -1) {\n    capabilities.minZoom =\n      Math.log2(data.scale_factors[data.scale_factors.length - 1]) *\n      (data.scale_factors[data.scale_factors.length - 1] > 1 ? -1 : 1);\n    capabilities.maxZoom = Math.log2(data.scale_factors[0]) * (data.scale_factors[0] > 1 ? -1 : 1);\n  }\n\n  return capabilities;\n}\n\n/**\n * Compute the server capabilities for a IIIF server in v2.0.\n * @see https://iiif.io/api/image/2.0/#successful-responses\n */\nfunction computeServerCapabilitiesForV2(data: any): ServerCapabilities {\n  const capabilities = Object.assign({}, SERVER_CAPABILITIES_DEFAULT);\n  capabilities.version = \"2.0\";\n  const level = data.profile[0];\n\n  // Defined capabilities per level\n  switch (level) {\n    case \"level2\":\n      capabilities.qualities = [\"default\", \"bitonial\"];\n      capabilities.formats = [\"jpg\", \"png\"];\n      break;\n    case \"level1\":\n      capabilities.qualities = [\"default\"];\n      capabilities.formats = [\"jpg\", \"png\"];\n      break;\n    // level0\n    default:\n      capabilities.qualities = [\"default\"];\n      capabilities.formats = [\"jpg\"];\n      break;\n  }\n\n  // Formats\n  if (data.profile[1] && data.profile[1].formats) capabilities.formats = data.profile[1].formats;\n\n  // Qualities\n  if (data.profile[1] && data.profile[1].qualities) capabilities.qualities = data.profile[1].qualities;\n\n  // Rotation\n  if (\n    data.profile[1] &&\n    data.profile[1].supports &&\n    (data.profile[1].supports.includes(\"rotationBy90s\") || data.profile[1].supports.includes(\"rotationArbitrary\"))\n  )\n    capabilities.rotation = true;\n\n  // Mirroring\n  if (data.profile[1] && data.profile[1].supports && data.profile[1].supports.includes(\"mirroring\"))\n    capabilities.mirroring = true;\n\n  // Tiles size & scale factors\n  if (data.tiles && data.tiles.length > -1) {\n    const tile = data.tiles[0];\n    capabilities.tileSize = L.point(tile.width, tile.height ? tile.height : tile.width);\n    capabilities.minZoom =\n      Math.log2(tile.scaleFactors[tile.scaleFactors.length - 1]) *\n      (tile.scaleFactors[tile.scaleFactors.length - 1] > 1 ? -1 : 1);\n    capabilities.maxZoom = Math.log2(tile.scaleFactors[0]) * (tile.scaleFactors[0] > 1 ? -1 : 1);\n  }\n\n  return capabilities;\n}\n\n/**\n * Compute the server capabilities for a IIIF server in v3.0.\n * @see https://iiif.io/api/image/3.0/#51-image-information-request\n */\nfunction computeServerCapabilitiesForV3(data: any): ServerCapabilities {\n  const capabilities = Object.assign({}, SERVER_CAPABILITIES_DEFAULT);\n  capabilities.version = \"3.0\";\n\n  const level = data.profile;\n\n  // Defined capabilities per level\n  switch (level) {\n    case \"level2\":\n      capabilities.qualities = [\"default\"];\n      capabilities.formats = [\"jpg\", \"png\"];\n      break;\n    default:\n      capabilities.qualities = [\"default\"];\n      capabilities.formats = [\"jpg\"];\n      break;\n  }\n\n  // Extra format\n  if (data.extraFormats && data.extraFormats instanceof Array)\n    capabilities.formats = capabilities.formats.concat(\n      data.extraFormats.filter(ef => !capabilities.formats.includes(ef)),\n    );\n\n  // Extra qualities\n  if (data.extraQualities && data.extraQualities instanceof Array)\n    capabilities.qualities = capabilities.qualities.concat(\n      data.extraQualities.filter(eq => !capabilities.qualities.includes(eq)),\n    );\n\n  // Rotation\n  if (\n    data.extraFeatures &&\n    (data.extraFeatures.includes(\"rotationBy90s\") || data.extraFeatures.includes(\"rotationArbitrary\"))\n  )\n    capabilities.rotation = true;\n\n  // Mirroring\n  if (data.extraFeatures && data.extraFeatures.includes(\"mirroring\")) capabilities.mirroring = true;\n\n  // Tiles size\n  if (data.tiles && data.tiles.length > -1) {\n    const tile = data.tiles[0];\n    capabilities.tileSize = L.point(tile.width, tile.height ? tile.height : tile.width);\n    capabilities.minZoom =\n      Math.log2(tile.scaleFactors[tile.scaleFactors.length - 1]) *\n      (tile.scaleFactors[tile.scaleFactors.length - 1] > 1 ? -1 : 1);\n    capabilities.maxZoom = Math.log2(tile.scaleFactors[0]) * (tile.scaleFactors[0] > 1 ? -1 : 1);\n  }\n\n  return capabilities;\n}\n","module.exports = __WEBPACK_EXTERNAL_MODULE__389__;","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\tid: moduleId,\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","import L from \"leaflet\";\nimport { IIIFLayerOptions, IIIFControlOptions, ServerCapabilities } from \"./types\";\nimport { IIIF_EVENTS } from \"./event\";\nimport { IIIFLayer } from \"./layer\";\nimport { IIIFControl } from \"./toolbar\";\nimport \"./assets/index.scss\";\n\nexport { IIIFLayer, IIIFControl, IIIFLayerOptions, IIIFControlOptions, ServerCapabilities };\n\nwindow.L[\"Iiif\"] = { Event: IIIF_EVENTS };\nwindow.L.tileLayer[\"iiif\"] = function(url: string, options: IIIFLayerOptions) {\n  return new IIIFLayer(url, options);\n};\nwindow.L.control[\"iiif\"] = function(layer: IIIFLayer, options: IIIFControlOptions) {\n  return new IIIFControl(layer, options);\n};\n"],"sourceRoot":""}